jQuery.sap.registerPreloadedModules({version:"2.0",name:"brs_demo_tablemaster/Component-preload",modules:{"brs_demo_tablemaster/Component.js":'sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","brs_demo_tablemaster/model/models","sap/ui/model/json/JSONModel"],function(e,t,i,s){"use strict";return e.extend("brs_demo_tablemaster.Component",{metadata:{manifest:"json"},init:function(){this.getSiteSetting(),e.prototype.init.apply(this,arguments),this.setModel(i.createDeviceModel(),"device")},getSiteSetting:function(){if(sap.ushell){var e=sap.ushell.Container.getService("SiteService"),t=e.getSiteSettings();if(t){var i=new s;i.setData(t),this.setModel(i,"destModel")}}}})});',"brs_demo_tablemaster/controller/ActionClass.js":'sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/model/odata/ODataModel","sap/m/Dialog","sap/m/MessageBox","sap/m/MessageToast","sap/m/List","brs_demo_tablemaster/utilities/Utilities"],function(e,t,o,a,i,n,r){return{actionBtnSetup:function(e,t,o,a){var i,n;this.oController=o,this.dTblLI=a;var r=e.actionBtn,s=e.variantData;switch(r&&r.hasOwnProperty("ButtonPar")&&(i=r.ButtonPar),i&&(n=JSON.parse(i)),n.action.toLowerCase()){case"document":this.createDocumentDialog(t,s,r,n);break;case"case":this.checkCurrentUserBE(),this.createCaseDialog(t,s,r,n);break;case"longtext":this.createSuperComments(t,s,r,n);break;case"download":this.downloadPDF(a,s,r,n)}},downloadPDF:function(e,t,o,i){var n=i.RetData,r="";if(n&&n.VariantFields){n.VariantFields.split(",").forEach(function(e){r+=e+"="+i[e]+"&"},this)}r+="SecurityAppID="+i.SecurityAppID+"&SecurityAppVariantID="+i.SecurityAppVariantID+"&";var s="";if(n.DocumentID.split(",").forEach(function(t){s+=t+" eq \'"+e.getModel().getProperty(e.getBindingContextPath()+"/"+t)+"\' and "},this),!s)return void a.alert("No Document found for download");var l=s.lastIndexOf("and");l>-1&&(s=s.substring(0,l).trim()),r=r+"DocFilter="+s,r=r+"&DocumentID=\'"+e.getModel().getProperty(e.getBindingContextPath()+"/"+n.DocumentID)+"\'";var p=i.Service;if(!p)return void a.alert("No Attachment Service. Please check the config");window.open("/EZYCOMMERCE_SERVER_NATIVE"+p+"?"+r)},createDialog:function(e){var t=!sap.ui.Device.system.desktop,a=new o({title:e,stretch:t,buttons:[new sap.m.Button({text:this.oController.oBundle.getProperty("close"),press:function(e){a.close()}})]});return a},createSuperComments:function(e,o,a,i){var r,s=i.param,l=i.objectType,p=i.objectSubtype;if(s&&e){var d=this.createDialog(this.oController.oBundle.getProperty("comments"));if(d.setBusyIndicatorDelay(0),(!s||!l||e&&e instanceof sap.m.ColumnListItem)&&(r=e.getModel().getData()[e.getBindingContextPath().substr(1)][s]),r){d.isOpen()||d.open(),d.setBusy(!0);var u=new t(this.oController.serviceURL+this.oController.basePath+"/HAA/services/LongText.xsodata",{json:!0,defaultCountMode:sap.ui.model.odata.CountMode.None}),c=[new sap.ui.model.Filter({path:"OBJECTKEY",operator:sap.ui.model.FilterOperator.EQ,value1:r})];p&&c.push(new sap.ui.model.Filter({path:"TextSubTypeID",operator:sap.ui.model.FilterOperator.EQ,value1:p}));var m=new n({inset:!1,growing:!0});m.setModel(u),d.addContent(m),this.longTextTemplate||(this.longTextTemplate=sap.ui.xmlfragment("brs_demo_tablemaster.fragments.LongText"));var h=new sap.m.CustomListItem;h.addContent(this.longTextTemplate),m.bindAggregation("items",{path:"/LongText",template:h,filters:[new sap.ui.model.Filter({filters:c,and:!0})],sorter:[new sap.ui.model.Sorter({path:"TDLDATE",descending:!0}),new sap.ui.model.Sorter({path:"TDLTIME",descending:!0})]}),d.setBusy(!1)}}},createLongTextDialog:function(e,o,a,i){var r,s=i.objectType,l=this.oController.getView().getModel("longText");if(s&&e&&!(!e instanceof sap.m.ColumnListItem)){var p=this.createDialog(this.oController.oBundle.getProperty("longText"));p.setStretch(!1),p.setBusyIndicatorDelay(0),p.setBusy(!0),p.open();var d=e.getModel(),u=e.getBindingContextPath().substr("1"),c=d.getData()[u],m=l.getData()[s];r=c[m.paramField1];var h,g,y=new t(this.oController.sapServiceURL+"/sap/opu/odata/sap/ZSERVICEREQUESTDOCS_SRV",{json:!0});s&&"reobject"===s.toLowerCase()?(h=new sap.ui.model.Filter({path:"Name2",operator:"EQ",value1:r}),i.reid&&(g=new sap.ui.model.Filter({path:"Id",operator:"EQ",value1:i.reid}))):(h=new sap.ui.model.Filter({path:"Name",operator:"EQ",value1:r}),g=new sap.ui.model.Filter({path:"Id",operator:"EQ",value1:m.id}));var v=[g,new sap.ui.model.Filter({path:"Object",operator:"EQ",value1:m.object}),h];if(s&&"reobject"===s.toLowerCase())v.push(new sap.ui.model.Filter({path:"Name",operator:"EQ",value1:"9800"}));else if(s&&"equipmentpermits"===s.toLowerCase()){if(!this.dTblLI)return void p.setBusy(!1);var C=this.dTblLI.getModel().getData(this.dTblLI.getBindingContextPath()).PermitsID;if(!C)return void p.setBusy(!1);v.push(new sap.ui.model.Filter({path:"Name2",operator:"EQ",value1:C}))}var f=new sap.ui.model.Filter({filters:v,and:!0}),w=new n({inset:!1,growing:!0});w.setModel(y),p.addContent(w);var b=new sap.m.CustomListItem({content:[new sap.m.Text({width:"auto",text:"{Text}",wrapping:!0}).addStyleClass("sapUiSmallMargin")]});w.bindAggregation("items",{path:"/ReadText",template:b,filters:[f]}),p.setBusy(!1)}},createCaseDialog:function(e,o,i,r){var s,l=r.param,p=r.interactionType,d=r.objectType,u=r.referenceObjects,c=r.activitySubType||void 0;if(l&&p&&d){var m=this.createDialog(this.oController.oBundle.getProperty("ci"));if(m.setBusyIndicatorDelay(0),e&&e instanceof sap.m.ColumnListItem&&(s=e.getModel().getData()[e.getBindingContextPath().substr(1)][l]),!s)return;m.isOpen()||m.open();var h=[];if(u&&u.length>0){var g=u.split(",");this.getReferenceDatasetup(g,$.proxy(function(t){t.results.forEach(function(t){var o=e.getModel().getData()[e.getBindingContextPath().substr(1)][t.FieldName];h.push({ReferenceObjectID:o,ReferenceObjectTypeID:t.ReferenceObjectTypeID})},this)},this),$.proxy(function(e){m.setBusy(!1),jQuery.sap.log.error(e.responseText),a.alert(sap.ui.getCore().getModel("i18n").getProperty("err_gen"))},this))}var y=new t(this.oController.serviceURL+"/BRS/HAA/services/CaseAndInt.xsodata",{json:!0});if(p&&"question"===p.toLowerCase()){var v=new sap.m.Button({text:this.oController.oBundle.getProperty("newQuestion"),icon:"sap-icon://add"});v.attachPress({dataObj:h,InteractionType:"question",activitySubType:c},this.onInteractionCreate.bind(this)),m.insertButton(v,0)}else if(p&&"comment"===p.toLowerCase()){var C=new sap.m.Button({text:this.oController.oBundle.getProperty("newComment"),icon:"sap-icon://add"});C.attachPress({dataObj:h,InteractionType:"Comment",activitySubType:c},this.onInteractionCreate.bind(this)),m.insertButton(C,1)}var f=[new sap.ui.model.Filter({path:"ReferenceObjectID",operator:sap.ui.model.FilterOperator.EQ,value1:s}),new sap.ui.model.Filter({path:"ReferenceObjectTypeID",operator:sap.ui.model.FilterOperator.EQ,value1:d})];p&&"question"===p.toLowerCase()?f.push(new sap.ui.model.Filter({filters:[new sap.ui.model.Filter({path:"ActivityTypeID",operator:sap.ui.model.FilterOperator.EQ,value1:p}),new sap.ui.model.Filter({path:"ActivityTypeID",operator:sap.ui.model.FilterOperator.EQ,value1:"Answer"})],and:!1})):f.push(new sap.ui.model.Filter({path:"ActivityTypeID",operator:sap.ui.model.FilterOperator.EQ,value1:p})),c&&"risk_comment"===c.toLowerCase()?f.push(new sap.ui.model.Filter({path:"ActivitySubTypeID",operator:sap.ui.model.FilterOperator.EQ,value1:"Risk_Comment"})):c&&f.push(new sap.ui.model.Filter({path:"ActivitySubTypeID",operator:sap.ui.model.FilterOperator.EQ,value1:c}));var w=new sap.ui.model.Filter({filters:f,and:!0}),b=new n({inset:!1,includeItemInSelection:!0,growing:!0});b.setModel(y,"ciModel"),this.oController.getView().setModel(y,"ciModel"),m.addContent(b);var D=new sap.m.StandardListItem({type:"Inactive",title:"{ciModel>Comments}",description:"{ciModel>CreatedBy}",info:"{path: \'ciModel>CreatedDate\', type:\'sap.ui.model.type.Date\'}"}).addStyleClass("actionCaseCommentsLI");D.bindProperty("icon",{path:"ciModel>ActivityTypeID",formatter:function(e){var t="sap-icon://comment";return e&&"question"===e.toLowerCase()?t="sap-icon://question-mark":e&&"answer"===e.toLowerCase()&&(t="sap-icon://response"),t}}),b.bindAggregation("items",{path:"ciModel>/Comments",template:D,filters:[w],sorter:[new sap.ui.model.Sorter({path:"CaseID",descending:!1}),new sap.ui.model.Sorter({path:"ActivityID",descending:!1})]})}else a.alert(this.oConroller.oBundle.getProperty("caseActionGreErr"))},getReferenceDatasetup:function(e,o,a){var i=[];e&&e.length&&e.length>0&&e.forEach(function(e){i.push(new sap.ui.model.Filter({path:"FieldName",operator:sap.ui.model.FilterOperator.EQ,value1:e}))},this),new t(this.oController.serviceURL+"/BRS/HAA/services/CaseAndInt.xsodata",{json:!0}).read("ReferenceObjectType",{async:!1,filters:[new sap.ui.model.Filter({filters:i,and:!1})],success:o.bind(this),error:a.bind(this)})},onInteractionCreate:function(e,o){if(this.oController.isParentBE)return void a.alert(this.oController.oBundle.getProperty("beerr"));if(this.rrRating=void 0,o){var i=this.createDialog(this.oController.oBundle.getProperty("create"));if(i.setIcon("sap-icon://add"),i.insertButton(new sap.m.Button({text:this.oController.oBundle.getProperty("save"),icon:"sap-icon://save",press:$.proxy(function(){this.createCI(i,o,e)},this)})),this.diagContent||(this.diagContent=sap.ui.xmlfragment(this.oController.getView().getId(),"brs_demo_tablemaster.fragments.CreateInteraction",this)),i.addContent(this.diagContent),o.InteractionType&&"comment"===o.InteractionType.toLowerCase())sap.ui.core.Fragment.byId(this.oController.getView().getId(),"idDOAL").setVisible(!1),this.diagContent.getItems()[0].setPlaceholder(this.oController.oBundle.getProperty("enterComment")),this.diagContent.getItems()[0].setValue("");else if(o.InteractionType&&"question"===o.InteractionType.toLowerCase()){var n=sap.ui.core.Fragment.byId(this.oController.getView().getId(),"idDOAL");n.setVisible(!0),this.loadDOA(o.InteractionType),this.diagContent.getItems()[0].setPlaceholder(this.oController.oBundle.getProperty("enterQuestion")),this.diagContent.getItems()[0].setValue("")}if(o.activitySubType&&"risk_comment"===o.activitySubType.toLowerCase()){var r=this.diagContent.getItems()[2];r.setVisible(!0);var s=new t(this.oController.serviceURL+"/BRS/Architect_DataModel/Query/CRE/services/QRY_LEASE_ACTIVITY.xsodata",{json:!0});if(r&&r instanceof sap.m.ComboBox){r.setModel(s),r.attachSelectionChange(function(e){var t=e.getParameter("selectedItem");t&&t instanceof sap.ui.core.Item&&(this.rrRating=t.getText())},this);var l=r.getBindingInfo("items").template;r.bindAggregation("items",{path:"/RISK_RATING",template:l})}}i.open()||i.open()}},createCI:function(e,t,o){var n=e.getContent()[0].getItems()[0].getValue();if(!n)return void e.getContent()[0].getItems()[0].setValueState("Error");var r={Case:[{Type:t&&t.InteractionType&&"question"===t.InteractionType?"Question":"Comment",Comments:n,AssignedObjects:t.dataObj}]};if(t&&t.activitySubType&&(r.Case[0].ActivitySubTypeID=t.activitySubType,"risk_comment"===t.activitySubType.toLowerCase())){var s=e.getContent()[0].getItems()[2];if(s&&s instanceof sap.m.ComboBox){var l=s.getSelectedItem().getText();this.createRiskRating(r,l)}}if(t&&t.InteractionType&&"question"===t.InteractionType.toLowerCase()){var p=sap.ui.core.Fragment.byId(this.oController.getView().getId(),"idDOA").getSelectedKey();r.Case[0].AssignedTo=p}if(!t.dataObj||!t.dataObj.length||t.dataObj.length<=0)return void a.alert(this.oController.oBundle.getProperty("err_gen"));e.setBusy(!0),$.ajax({url:this.oController.serviceURL+"/BRS/HAA/services/CICFastCreate.xsjs",type:"POST",data:JSON.stringify(r),context:this,contentType:"application/json",success:function(t){e.setBusy(!1),i.show(this.oController.oBundle.getProperty("caseSucc")),e.close(),this.oController.getView().getModel("ciModel").refresh(!0)},error:function(t){e.setBusy(!1),a.alert(this.oController.oBundle.getProperty("err_gen"))}})},loadDOA:function(e){var o=sap.ui.core.Fragment.byId(this.oController.getView().getId(),"idDOA");if(o&&!(!o instanceof sap.m.Select)&&e){o.setBusyIndicatorDelay(0),o.setVisible(!0);var a=new t(this.oController.serviceURL+"/BRS/HAA/services/CaseAndInt.xsodata",{json:!0});o.setModel(a);var i=o.getBindingInfo("items").template,n=new sap.ui.model.Filter({path:"CaseType",operator:"EQ",value1:jQuery.sap.charToUpperCase(e,0)});o.bindAggregation("items",{path:"/DOA",template:i,filters:[n],sorter:[new sap.ui.model.Sorter({path:"UserID",descending:!1})]})}},createRiskRating:function(e,t){var o=JSON.parse(JSON.stringify(e));o.Case[0].Comments=t,o.Case[0].ActivitySubTypeID="Risk_Rating",$.ajax({url:this.oController.serviceURL+"/BRS/HAA/services/CICFastCreate.xsjs",type:"POST",data:JSON.stringify(o),context:this,contentType:"application/json",success:function(e){var t=this.oController.getView().byId("idBRSTableMasterVariantSelectB").getSelectedKey();this.oController.getTableConfig(t,!1)},error:function(e){a.alert(this.oController.oBundle.getProperty("err_gen"))}})},createDocumentDialog:function(e,o,a,i){this.updtFinishedCalled=void 0,sap.ui.core.BusyIndicator.show(0);var n,s=i.param,l=this.createDialog(a.FieldDescription);if(l.setBusyIndicatorDelay(0),l.setBusy(!0),l.isOpen()||l.open(),l.attachAfterOpen(function(){sap.ui.core.BusyIndicator.hide()},this),s){if(e&&e instanceof sap.m.ColumnListItem){n=e.getModel().getData()[e.getBindingContextPath().substr(1)][s],l.setVerticalScrolling(!1);var p=new sap.m.Toolbar({width:"100%",content:[new sap.m.Toolbar({width:"100%",content:[new sap.m.ToolbarSpacer,new sap.m.Button({icon:"sap-icon://full-screen",customData:[new sap.ui.core.CustomData({key:"KMJTData",value:{objectID:n}})],press:this.jumpToKM.bind(this)})]})]});r.checkNavigationIntent("brscreapknowledgemanagement","Display",this.oController,$.proxy(function(e){e&&l.setSubHeader(p)},this)),this.kmTable=new sap.m.Table({width:"100%",inset:!0,growing:!0,growingThreshold:100}).addStyleClass("persoTableStyle");var d=new sap.m.ScrollContainer({width:"auto",height:"100%",vertical:!0,horizontal:!1,content:[this.kmTable]});if(l.addContent(d),this.kmTable.setBusyIndicatorDelay(0),!n)return void l.setBusy(!1);var u;if(i&&i.additionalFilter&&i.additionalFilter.length&&i.additionalFilter.length>0&&(u=this.getAddtionalFilterData(o,i,i.additionalFilter,n)),i.dependent&&this.getDependentObjectInfo(i,n,!1,$.proxy(function(e){e&&e.results&&e.results.length>0?n=e.results[0][i.dependentParam]:(l.setBusy(!1),n=void 0)},this),$.proxy(function(e){l.setBusy(!1),n=void 0},this)),!n)return l.setBusy(!1),void(n=void 0);this.kmTemplate=new sap.m.ColumnListItem;var c=[{columnName:"docType",binding:"DocumentTypeDesc",type:"text"},{columnName:"description",binding:"DocumentDescription",type:"text"},{columnName:"createdDate",binding:"CreatedOn",type:"date"},{columnName:"Document",binding:"",type:"button"}];c.forEach(function(e){this.kmTable.addColumn(new sap.m.Column({hAlign:"Center",vAlign:"Middle",header:[new sap.m.Text({width:"100%",text:this.oController.oBundle.getProperty(e.columnName)})]})),"date"===e.type?this.kmTemplate.addCell(new sap.m.DatePicker({editable:!1,width:"100%",textlign:"Center",value:"{path:\'"+e.binding+"\' ,type:\'sap.ui.model.type.Date\', formatOptions:{pattern: \'dd/MM/YYYY\'}}"})):"button"===e.type?this.kmTemplate.addCell(new sap.m.Button({icon:"sap-icon://document-text",customData:[new sap.ui.core.CustomData({key:"originals",value:"{}"})],press:this.onKMOriginalView.bind(this)})):this.kmTemplate.addCell(new sap.m.Text({width:"100%",textAlign:"Center",text:"{"+e.binding+"}"}))},this),this.kmTable.attachUpdateFinished(function(e){if(!this.updtFinishedCalled&&u&&u.length&&u.length>0){var t=[];u.forEach(function(e){t.push(new sap.ui.model.Filter({path:e.fieldname,operator:sap.ui.model.FilterOperator.EQ,value1:e.value||""}))},this);this.kmTable.getBinding("items").filter(t,"Application")}this.updtFinishedCalled=!0,l.setBusy(!1);var o=this.kmTable.getParent().getParent().getContent();if(o){var a=jQuery.sap.byId(o[0].getId()),i=a.height();this.kmTable.getParent().getParent().setContentHeight(i+"px")}},this);var m=this.oController.serviceURL+"/BRS/Architect_DataModel/Query/DMS/services/QRY_DMS_DOCUMENT.xsodata",h=new t(m,{json:!0,defaultCountMode:sap.ui.model.odata.CountMode.None});h.setDefaultBindingMode(sap.ui.model.BindingMode.OneWay),this.kmTable.setModel(h);var g=[new sap.ui.model.Filter({path:"LinkedObjectKey",operator:sap.ui.model.FilterOperator.EQ,value1:n})];u&&u.length&&u.length>0&&u.forEach(function(e){g.push(new sap.ui.model.Filter({path:e.fieldname,operator:sap.ui.model.FilterOperator.EQ,value1:e.value||""}))},this);var y;y=g&&g.length>1?new sap.ui.model.Filter({filters:g,and:!0}):g[0];var v={path:"/DocumentQuerySet",template:this.kmTemplate,filters:[y]};this.kmTable.bindAggregation("items",v),l.setBusy(!1)}}else l.setBusy(!1)},getAddtionalFilterData:function(e,t,o,a){var i=JSON.parse(JSON.stringify(o));return o.forEach(function(e,o){var n;if(e.fieldValueType&&e.fieldValueType.toLowerCase()&&"fixed"!==e.fieldValueType.toLowerCase()){var r=this.oController.serviceURL+e.additionalFieldService+"/"+e.additionalFieldEntity+"?$filter="+t.param+" eq \'"+a+"\'&$select="+e.fieldRef+"&$top=1&$format=json";$.ajax({url:r,method:"GET",async:!1,context:this,contentType:"application/json",success:function(t){(n=t.d.results[0][e.fieldRef])&&(i[o].value=n)}})}else i[o].value=e.fieldValue},this),i},getDependentObjectInfo:function(e,o,a,i,n){if(e.dependentService&&e.dependentParam&&e.dependentEntity){var r=this.oController.serviceURL+e.dependentService,s=new t(r,{json:!0}),l=[];if(e.dependentFilters&&e.dependentFilters.length&&e.dependentFilters.length>0){var p=this.dTblLI;e.dependentFilters.forEach(function(e){var t=p.getModel().getProperty(p.getBindingContextPath()+"/"+e.Fieldname);t&&l.push(new sap.ui.model.Filter({path:e.Fieldname,operator:sap.ui.model.FilterOperator.EQ,value1:t}))},this)}var d;l&&l.length>0?(l.push(new sap.ui.model.Filter({path:e.param,operator:"EQ",value1:o})),d=new sap.ui.model.Filter({filters:l,and:!0})):d=new sap.ui.model.Filter({path:e.param,operator:"EQ",value1:o});var u={async:void 0===a&&null===a||a,urlParameters:{$select:e.dependentParam},filters:[d],success:i,error:n};s.read("/"+e.dependentEntity,u)}},onKMOriginalView:function(e){var t=e.getSource();if(t&&t instanceof sap.m.Button){var o=t.data("originals"),i=this.oController.sapServiceURL+"/sap/opu/odata/sap/ZKMDOCUMENTS_SRV/DocumentQuerySet(DocumentType=\'"+o.DocumentType+"\',DocumentNumber=\'"+o.DocumentNumber+"\',DocumentVersion=\'"+o.DocumentVersion+"\')/Original";i?$.ajax({url:i+"?$format=json",type:"GET",context:this,contentType:"application/json",success:function(e){if(e&&e.d.results&&e.d.results[0]&&e.d.results[0].__metadata&&e.d.results[0].__metadata.media_src){var t=this.oController.sapServiceURL+"/sap/opu/odata/sap/ZKMDOCUMENTS_SRV/Originals(DocumentType=\'"+o.DocumentType+"\',DocumentNumber=\'"+o.DocumentNumber+"\',DocumentVersion=\'"+o.DocumentVersion+"\')/$value";window.open(t)}else a.alert(this.controller.oBundle.getProperty("kmActDocErr"))},error:function(e){a.alert(this.controller.oBundle.getProperty("kmActDocErr"))}}):a.information(this.controller.oBundle.getProperty("kmActDocErr"))}},jumpToKM:function(e){var t=e.getSource(),o=t.data("KMJTData");if(sap.ushell){var i=sap.ushell.Container.getService("CrossApplicationNavigation"),n="#brscreapknowledgemanagement-Display";i.isIntentSupported([n],this.oController.getOwnerComponent()).done($.proxy(function(e){if(e&&e[n]&&!0===e[n].supported){sap.ui.core.BusyIndicator.show(0);var t={semanticObject:"",action:""},r=n.split("-");t.semanticObject=r[0].substr(1,r[0].length),t.action=r[1];var s=o,l=i&&i.hrefForExternal({target:t,params:s})||"";i.toExternal({target:{shellHash:l}})}else sap.ui.core.BusyIndicator.hide(),a.alert(this.controller.oBundle.getProperty("navNotPossible"))},this))}else a.alert(this.controller.oBundle.getProperty("navNotPossible"))},checkCurrentUserBE:function(){var e=this.oController.serviceURL+"/GetConfig.xsjs?checkbe";$.ajax({url:e,method:"GET",context:this,contentType:"application/json",success:function(e){this.oController.isParentBE=e.isParentBE}})}}});',"brs_demo_tablemaster/controller/DetailView.js":'sap.ui.define(["sap/m/MessageBox","sap/ui/layout/form/SimpleForm","sap/m/Panel","sap/ui/core/Title","sap/m/Label","sap/m/Text","sap/m/Table","sap/m/Column","sap/ui/model/odata/ODataModel","sap/ui/model/json/JSONModel","brs_demo_tablemaster/controller/ActionClass","brs_demo_tablemaster/utilities/Utilities","brs_demo_tablemaster/utilities/Controls"],function(e,t,a,i,r,o,s,n,l,p,d,u,c){return{createDetailSection:function(t,a,i,r){this.oController=r,this.oBundle=this.oController.getView().getModel("i18n"),this.variantData=t,this.item=i,this.parentC=a,a.setBusyIndicatorDelay(0);var o=this.oController.getView().byId("idBRSPanelContainer");this.detailBox=o,o.getItems().length>0&&o.destroyItems(),o.setBusyIndicatorDelay(0),o.setBusy(!0);var s=r.serviceURL+"/GetConfig.xsjs?DetailView="+t.DetailViewID;$.ajax({url:s,type:"GET",context:this,contentType:"application/json",success:function(e){this.checkConfig(e.results,a)},error:function(t){e.alert("Could not fetch detail config Data")}})},checkConfig:function(t){var a=new p;a.setData(),this.oController.getView().setModel(a,"detailSectionFormModel"),this.getFormData(t,$.proxy(function(e){if(e.results){var i=e.results[0];e.results.length>1&&(i=this.mergeData(e.results)),a.setData(i),a.refresh(!0),t.Tabs&&"0"===t.Tabs[0].TabID?(this.filterField=t.FilterField,this.createFormsUI(t)):this.createTabsUI(t)}},this),$.proxy(function(t){e.alert(this.oBundle.getProperty("err_gen")),this.detailBox.setBusy(!1),jQuery.sap.log.error("Detail Data call Failed "+t.statusText)},this))},mergeData:function(e){var t=JSON.parse(JSON.stringify(e[0]));return this.variantData.Fields.forEach(function(a){if(a.Aggr_Oper){var i=0;e.forEach(function(e){e[a.Fieldname]&&!isNaN(parseFloat(e[a.Fieldname],10))&&(i+=parseFloat(e[a.Fieldname],10))},this),t[a.Fieldname]=i}else{var r;e.forEach(function(e){r=e[a.Fieldname]?e[a.Fieldname]:r},this),t[a.Fieldname]=r}},this),t},createFormsUI:function(e){var o=this.oController.getView().byId("idBRSPanelContainer");o.getItems().length>0&&o.destroyItems();var s=e.Tabs[0].Sections;s&&s instanceof Array&&(this.tableSections=[],s.forEach(function(e){var s=new a({headerText:e.SectionDescription,expandable:!0,expanded:!0,backgroundDesign:"Solid"}).addStyleClass("sapUiSizeCompact");if(e&&e.SectionType&&"form"===e.SectionType.toLowerCase()){var n=e.Fields,l=2;n.map(function(e){parseInt(e.FormColumn,10)>l&&(l=e.FormColumn)});var p=new t({editable:!1,layout:"ResponsiveGridLayout",minWidth:1024,maxContainerCols:l,labelSpanXL:4,labelSpanL:3,labelSpanM:4,emptySpanXL:0,emptySpanL:0,emptySpanM:0,columnsXL:l,columnsL:l,columnsM:l,singleContainerFullSize:!0}).addStyleClass("sapUiSizeCompact").addStyleClass("detailViewForm");s.addContent(p);for(var d=1;d<=l;d++)p.addContent(new i({level:"Auto"})),n.forEach(function(e){if(e.FormColumn===d){var t=new sap.m.Text({wrapping:!0,customData:[new sap.ui.core.CustomData({key:"fieldData",value:e})]}).bindProperty("text",{path:"detailSectionFormModel>/"+e.Fieldname,formatter:function(e){var t=this.data("fieldData"),a=t.FieldType,i=t.FormatStyle,r=t.DecPlaces;return u.formatValue(e,a,i,r)}}),a=new r({text:e.FieldDescription,tooltip:e.FieldDescription}).addStyleClass("sapUiTinyMarginBottom");"link"===e.FieldType?(t=new sap.m.Link({text:"{detailSectionFormModel>/"+e.Fieldname+"}",tooltip:"{detailSectionFormModel>/"+e.Fieldname+"}",customData:new sap.ui.core.CustomData({key:"detailPopup",value:e})}),t.setBusyIndicatorDelay(0),t.attachPress(this.openPopup,this)):"button"===e.FieldType&&(t=new sap.m.Button({width:"auto",text:e.FieldDescription,customData:[new sap.ui.core.CustomData({key:"actionBtn",value:e}),new sap.ui.core.CustomData({key:"variantData",value:this.variantData})],press:this.oController.onActionBtnPress.bind(this.oController)})),p.addContent(a).addContent(t)}},this);o.addItem(s)}else if(e&&e.SectionType&&"table"===e.SectionType.toLowerCase()){var c=new sap.m.ScrollContainer({width:"100%",height:"100%",vertical:!0,horizontal:!0});s.addContent(c);var h=new sap.m.Table({inset:!0,width:"100%",growing:!0,growingThreshold:100,updateFinished:function(e){e.getSource().setBusy(!1)}});c.addContent(h),o.addItem(s),this.getVariantConfig(e,c,h);var m={sectionData:e,dsFormPanel:s,dsc:c,dTbl:h};this.tableSections.push(m)}},this)),o.setBusy(!1)},getVariantConfig:function(e,t,a){var i=e.Fields[0].TableAppID,o=e.Fields[0].TableAppVariantID;if(i&&o){a.setBusy(!0);var r=this.oController.serviceURL+"/GetConfig.xsjs?AppID="+i+"&AppVariantID="+o;$.ajax({url:r,type:"GET",context:this,contentType:"application/json",success:function(e){if(e&&e.Variants&&e.Variants.length&&e.Variants.length>0){var t=e.Variants.filter(e=>e.AppVariantID==o);this.loadTable(t[0],a)}},error:function(e){t.setBusy(!1),jQuery.sap.log.error("Could not fetch Data for the Detail View Table for AppId/AppVariantID "+i+"/"+o,this.oController.getOwnerComponent())}})}},loadTable:function(e,t){var a,i,r,o={selectArr:[],sorter:[],filter:[]},s=e.Service,n=e.ServEntity;i=e.Fields;var l={json:!0,defaultCountMode:sap.ui.model.odata.CountMode.None,useBatch:!1,disableHeadRequestForToken:!0};t.getColumns().length>0&&t.destroyColumns(),t.getItems().length>0&&t.destroyItems(),a=new sap.ui.model.odata.v2.ODataModel("/EZYCOMMERCE_SERVER_NATIVE"+s,l),t.setModel(a),t.addCustomData(new sap.ui.core.CustomData({key:"dTblVariant",value:e}));var p=new sap.m.ColumnListItem({type:"Inactive"});i.forEach(function(a){if(a.Visible&&"true"===a.Visible.toLowerCase()){var i=!!a.Aggr_Oper,r=a.ColumnWidth&&!isNaN(parseFloat(a.ColumnWidth,10))?10*parseFloat(a.ColumnWidth,10):180,s=new sap.m.Column({width:r+"px",hAlign:!0===i?"End":"Begin",vAlign:"Middle"});s.setHeader(new sap.m.Text({width:"100%",text:a.FieldDescription})),s.setVisible("#GROUPINGID"!==a.Fieldname),(!a.FieldType||"button"!==a.FieldType.toLowerCase()&&"seg_button"!==a.FieldType.toLowerCase()&&"dialoginput"!==a.FieldType.toLowerCase()&&"input"!==a.FieldType.toLowerCase())&&o.selectArr.push(a.Fieldname);var n;switch(a.FieldType){case"button":n=c.button(a,e,this.oController);break;default:n=new sap.m.Text({width:"100%",customData:[new sap.ui.core.CustomData({key:"fieldData",value:a})]}).bindProperty("text",{path:a.Fieldname,formatter:function(e){var t=this.data("fieldData"),a=t.FieldType,i=t.FormatStyle,r=t.DecPlaces,o=e;if("#GROUPINGID"===this.getBinding("text").sPath&&null!==e){var s=this.getParent();s.setType(sap.m.ListType.Inactive),s.rerender(),s.addStyleClass("brsSubTotalRow").addStyleClass("brsDefaultCursor")}return o&&a&&"date"===a.toLowerCase()&&o.match&&o.match(/Date/gi)&&(o=parseInt(o.substr(6),10)),o=u.formatValue(o,a,i,r)}})}p.addCell(n),t.addColumn(s)}},this),r={path:"/"+n,template:p};var d="";o.selectArr&&o.selectArr.length&&o.selectArr.length>0&&(o.selectArr.forEach(function(e){d+=e+","},this),d=d.replace(/,([^,]*)$/,""),r.parameters={select:d,custom:{AppID:e.AppID,AppVariantID:e.AppVariantID}});var h;h=this.getDtViewFilter(),h&&o.filter.push(h),o.filter.length>0&&(r.filters=o.filter),t.bindAggregation("items",r)},getDtViewFilter:function(e){var t,a=[],i=e||this.filterField,r=i.split(",");if(r&&r.length&&r.length>0){var o=this.item.getCells();r.forEach(function(e){var t=o.filter(function(t){if(t.getBindingPath("text")===e.trim())return t.getText()},this);t&&t[0]&&a.push(new sap.ui.model.Filter({path:e.trim(),operator:sap.ui.model.FilterOperator.EQ,value1:t[0].getText()}))},this),a&&a.length>0&&(t=new sap.ui.model.Filter({filters:a,and:!0}))}return t},openPopup:function(e){this._dvPopup||(this._dvPopup=sap.ui.xmlfragment("brs_demo_tablemaster.fragments.DetailPopup",this.oController),this._dvPopup.setBusyIndicatorDelay(0),this.oController.getView().addDependent(this._dvPopup)),this._dvPopup.destroyContent();var a=e.getSource();a.setBusyIndicatorDelay(0),a.setBusy(!0);var i,s,n=e.getSource().data("detailPopup");if(!n)return void jQuery.sap.log.error("no Popup data Defined for the clicked item",this.oController.getOwnerComponent());var d=new t({minWidth:1024,maxContainerCols:1,editable:!1,layout:"ResponsiveGridLayout",labelSpanL:3,labelSpanM:3,emptySpanL:4,emptySpanM:4,columnsL:1,columnsM:1});if(this._dvPopup.addContent(d),i=n.TableAppID,s=n.TableAppVariantID,i&&s){this._dvPopup.setBusy(!0);var c="/EZYCOMMERCE_SERVER"+"/GetConfig.xsjs?AppID="+i+"&AppVariantID="+s;$.ajax({url:c,type:"GET",context:this,contentType:"application/json",success:function(e){if(e&&e.results&&e.results.hasOwnProperty("Variants"))var t=e.results.Variants[0];var i=new p;i.setData(),this.oController.getView().setModel(i,"dvPoupDetailModel"),t.Fields.forEach(function(e){if(e.Visible&&"true"===e.Visible.toLowerCase()){var t=new r({text:e.FieldDescription}),a=new o({wrapping:!0,customData:[new sap.ui.core.CustomData({key:"fieldData",value:e})]}).bindText("dvPoupDetailModel>/"+e.Fieldname,function(e){var t=this.data("fieldData"),a=t.FieldType,i=t.FormatStyle,r=t.DecPlaces;return u.formatValue(e,a,i,r)});d.addContent(t).addContent(a)}},this),jQuery.sap.delayedCall(0,this,function(){if(a){this._dvPopup.openBy(a),a.setBusy(!1);var e,r=this.filterField;if(a&&a instanceof sap.m.Link){var o=a.getBinding("text");o.getPath()&&(r=o.getPath().replace(/\\//g,"")),e=o.getValue()}if(r&&e){var s=new l(this.oController.serviceURL+t.Service,{json:!0}),n=new sap.ui.model.Filter({path:r,operator:sap.ui.model.FilterOperator.EQ,value1:e});s.read("/"+t.ServEntity,{filters:[n],success:$.proxy(function(e){e&&e.d?i.setData(e.d.results[0]):i.setData(e.results[0]),this._dvPopup.setBusy(!1)},this),error:$.proxy(function(e){this._dvPopup.setBusy(!1),jQuery.sap.log.error("Popup Data Error")},this)})}}},[a,t])},error:function(e){this._dvPopup.setBusy(!1),jQuery.sap.log.error("Error fetching variant Data for appID/appVariantID : "+i+"/"+s)}})}},getFormData:function(e,t,a){var i="/EZYCOMMERCE_SERVER_NATIVE"+this.variantData.Service,r=new l(i,{json:!0});if(!1===this.oController.getParamterString(this.variantData.Fields))return void jQuery.sap.log.error("Parameter String not set in variant - "+this.variantData.AppVariantID+"/"+this.variantData.UsrVariantID);var o=this.getDtViewFilter(e.FilterField);if(!o)return this.oController.getView().byId("idBRSPanelContainer").setBusy(!1),void jQuery.sap.log.error("No FilterVal found for Detail View");r.read("/"+this.variantData.ServEntity,{urlParameters:["AppID="+this.oController.variantData.AppID,"AppVariantID="+this.oController.variantData.AppVariantID],filters:[o],success:t,error:a})},onActionBtnPress:function(e){var t=e.getSource(),a=t.data(),i=this.item;d.actionBtnSetup(a,i,this.oController)}}},!0);',
"brs_demo_tablemaster/controller/TableMaster.controller.js":'sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageBox","sap/ui/model/json/JSONModel","brs_demo_tablemaster/FilterPane/FilterPane","brs_demo_tablemaster/controller/DetailView","brs_demo_tablemaster/utilities/Utilities","brs_demo_tablemaster/controller/ActionClass","brs_demo_tablemaster/utilities/Controls","sap/ui/core/util/Export","sap/ui/core/util/ExportTypeCSV"],function(e,t,a,i,s,r,n,o,l,d){"use strict";return e.extend("brs_demo_tablemaster.controller.TableMaster",{basePath:"/BluView",onInit:function(){sap.ui.core.BusyIndicator.hide(),this.getView().setBusyIndicatorDelay(0),this.getView().setBusy(!0),this.component=this.getOwnerComponent(),this.serviceURL=this.getOwnerComponent().getManifestEntry("/sap.app/dataSources/HANA/uri"),this.sapServiceURL=this.getOwnerComponent().getManifestEntry("/sap.app/dataSources/SAPGateway/uri"),this.modulePath=jQuery.sap.getModulePath("brs_demo_tablemaster"),this.oBundle=this.component.getModel("i18n");var e=this.component.getModel("destModel");if(!e||!e.getProperty("/ezycommercedest"))return this.getView().setBusy(!1),void t.alert("No Destination configuration found. Please try again later");this.serviceURL="/"+e.getProperty("/ezycommercedest"),this.allDataFlag=void 0,this.filters=void 0,this.filterApplied=void 0,this.oInitialLoadMessage=this.getView().byId("idInitialLoadMessageStrip"),this.getView().byId("idBRSFilterToggleL").attachBrowserEvent("click",this.toggleFilterPane,this),r.initUtilities(this),sap.ushell?this.getComponentData():this.loadVariantData("OrderStat")},getComponentData:function(){var e=this.component.getComponentData();if(e&&e.startupParameters){var a=e.startupParameters.hasOwnProperty("title")?e.startupParameters.title[0]:"";this.getView().byId("idAppHeader").setText(unescape(a));var i=e.startupParameters.hasOwnProperty("appId")?e.startupParameters.appId[0]:void 0,s=e.startupParameters.hasOwnProperty("appVariantId")?e.startupParameters.appVariantId[0]:void 0,r=e.startupParameters.hasOwnProperty("uv")?e.startupParameters.uv[0]:void 0,n=e.startupParameters.hasOwnProperty("jtID")?e.startupParameters.jtID[0]:void 0;n?this.loadJumptoFilterData(i,s,r,n):i?this.loadVariantData(i,s,r):t.alert(this.oBundle.getProperty("appError"))}},loadJumptoFilterData:function(e,t,a,i){var s=this.serviceURL+"/BRS/HAA/services/SessionParameters.xsodata/SessionParameters?$format=json&$filter=Paramname eq \'jumpTo\'";$.ajax({url:s,type:"GET",context:this,contentType:"application/json",success:function(s){this.jumpToData=s.d.results[0].Value||s.results[0].Value,this.jumpToData&&JSON.parse(this.jumpToData).key&&JSON.parse(this.jumpToData).key===i&&(this.jumpTo=!0,this.jumpToData=JSON.parse(this.jumpToData).value),this.loadVariantData(e,t,a)},error:function(i){this.jumpTo=void 0,jQuery.sap.log.error("Filter Panel Data not passed"),this.loadVariantData(e,t,a)}})},loadVariantData:function(e,t,a){var i;this.cleanUp();var s=this.getView().byId("idBRSTableMasterVarintGrpSelect"),n=new sap.ui.model.json.JSONModel(this.serviceURL+this.basePath+"/HAA/services/AppConfig.xsodata/Application");n.attachRequestCompleted(function(o){this.getView().setModel(n,"variantGroupModel"),i=e||o.getSource().getData().d.results[0].AppID,s.setSelectedKey(i);var l=s.getList();r.addCustomStyleClass(l,"tableMasterSelectList"),this.getVariantConfig(i,t,a)},this),n.attachRequestFailed(function(e){},this)},getVariantConfig:function(e,t,a){this.cleanUp();var i=this.getView().byId("idBRSTableMasterVariantSelectB"),s=i.getList();r.addCustomStyleClass(s,"tableMasterSelectList");var n=new sap.ui.model.json.JSONModel;this.getView().setModel(n,"variantModel");var o;a=void 0===a?"App":a,$.ajax({url:"/EZYCOMMERCE_SERVER"+"/getConfig.xsjs?AppID="+e,type:"GET",context:this,contentType:"application/json",success:function(e){var s=e.Variants;if((s=s.filter(function(e){return e.AppVariantType&&("standard"===e.AppVariantType.toLowerCase()||"standard_updt"===e.AppVariantType.toLowerCase()||"verticaltable"===e.AppVariantType.toLowerCase()||"sptable_period"===e.AppVariantType.toLowerCase()||"sptable_period_flex"===e.AppVariantType.toLowerCase()||"sptable_lcomm_month"===e.AppVariantType.toLowerCase()||"sptable_lcomm_year"===e.AppVariantType.toLowerCase()||"spltable_rff"===e.AppVariantType.toLowerCase())}))&&s.length&&s.length>0){r.sortVariantList(s),n.setData(s),n.refresh(!0);var l,p=a&&"app"===a.toLowerCase()?"AppVariantID":"UsrVariantID";t&&(sap.ui.Device.browser.msie||sap.ui.Device.browser.edge?(l=s.filter(function(e){if(e[p]===t&&e.Type.toLowerCase()===a.toLowerCase())return e},this))&&l.length>0&&(l=l[0]):l=s.find(function(e){if(e[p]===t&&e.Type.toLowerCase()===a.toLowerCase())return e},this)),l||(l=n.getData()[0]),o="App"===l.Type?l.AppVariantID:"User"===l.Type&&"_#SUPER"===l.Username?l.AppVariantID+" "+l.UsrVariantID+" "+l.Username:l.AppVariantID+" "+l.UsrVariantID,this.variantData=l,i.setSelectedKey(o),jQuery.sap.delayedCall(10,this,function(){"sptable_lcomm_month"!==l.AppVariantType.toLowerCase()&&"sptable_lcomm_year"!==l.AppVariantType.toLowerCase()||(this._bCallMergeForlm=!0),this.getTableConfig(o,void 0,!0)},[o])}else this.getView().setBusy(!1)},error:function(e){n.setData(),sap.m.MessageBox.alert(this.oBundle.getProperty("err_gen"))}})},displayMandatoryFilterMessage:function(){this.intialLoadMessageDisplayed=!0;var e=this.getView().byId("idInitialLoadVB");e&&(sap.ui.core.BusyIndicator.hide(),this.getView().setBusy(!1),this.getView().byId("idBRSTableMasterVariantReponsiveDataTableHeader").setVisible(!1),this.getView().byId("idBRSTableMasterVariantReponsiveDataTable").setVisible(!1),e.setVisible(!0))},onVariantGroupChanged:function(e){var t=e.getParameter("selectedItem").getKey();this.getVariantConfig(t)},onVariantChanged:function(e){this.allDataFlag=void 0,this.intialLoadMessageDisplayed=void 0;var t=e.getSource(),a=t.getSelectedItem().data("variantData");!a||"sptable_lcomm_month"!==a.AppVariantType&&"sptable_lcomm_year"!==a.AppVariantType||(this._bCallMergeForlm=!0),this.getTableConfig(e,!0,!0)},getTableConfig:function(e,t,a){var s,n;if(this.cleanUp(),e instanceof Object?(s=e.getSource(),n=s.getSelectedItem().data("variantData")):(s=this.getView().byId("idBRSTableMasterVariantSelectB"),s.setSelectedKey(e),n=s.getSelectedItem()?s.getSelectedItem().data("variantData"):null),n=this.variantData,n&&n.AppVariantType&&"standard_updt"===n.AppVariantType.toLowerCase()?this.getView().byId("idSaveData").setVisible(!0):this.getView().byId("idSaveData").setVisible(!1),!1!==t?i.loadFilterUI(n,this):i.setAdvancedFilterCount(this,"idBRSFilterPaneAdvL",n),this.jumpTo&&n&&!0===a||this._bCallMergeForlm&&n&&n.AppVariantType&&("sptable_lcomm_month"===n.AppVariantType||"sptable_lcomm_year"===n.AppVariantType))r.mergeJTFPVarfilters(n);else{if(!this.jumpTo&&!this.intialLoadMessageDisplayed&&n.InitialDataLoadFlag&&"false"===n.InitialDataLoadFlag.toLowerCase())return void this.displayMandatoryFilterMessage();this.setTableConfig(n,a)}},filterPaneCreateUI:function(e,t){var a,s,r=!1,n=new sap.m.VBox({width:"100%",fitContainer:!0,items:[new sap.m.Label({text:t.getProperty("FieldDescription")?t.getProperty("FieldDescription").toUpperCase():""}).addStyleClass("sapUiSmallMarginTop brsFilterPaneLabelColor")]});n.setLayoutData(new sap.ui.layout.GridData({span:"XL4 L4 M6 S12"}));var o=t.getProperty("SelectionControl"),l=new sap.ui.core.CustomData({key:"fltrLoadInfo",value:t.getObject(t.sPath)}),p=this.getView().byId("idBRSTableMasterVariantSelectB"),d=p.getSelectedItem()?p.getSelectedItem().data("variantData"):null,d=this.variantData,u=new sap.ui.core.CustomData({key:"variantData",value:d}),g=new sap.ui.core.CustomData({key:"selectionControl",value:o});n.addCustomData(g);var c;sap.ui.Device.browser.msie||sap.ui.Device.browser.edge?(c=d.Fields.filter(function(e){if(e.Fieldname===t.getProperty("Fieldname"))return e},this))&&c.length>0&&(c=c[0]):c=d.Fields.find(function(e){if(e.Fieldname===t.getProperty("Fieldname"))return e},this),c&&c.Filter_Val&&c.Filter_Val.length&&c.Filter_Val.length>0&&(t.getObject(t.sPath).DefaultFilterVal=c.Filter_Val,r=!0);var h,m=t.getProperty("Fieldname");switch(o&&o.toLowerCase()){case"single":case"multi":var f=t.getProperty("Dialog");if(this.jumpTo&&(h=this.jumpToData.filter(function(e){return e.Fieldname===m},this)),h&&h.length&&h.length>0&&(l.getValue().DefaultFilterVal=h,r=!0),f&&"true"===f.toLowerCase()){var y=new sap.m.MultiInput({enableMultiLineMode:!1,placeholder:"Select "+t.getProperty("FieldDescription"),showValueHelp:!0,valueHelpOnly:!0});y.attachValueHelpRequest(function(e){var t=e.getSource().data("fltrLoadInfo"),a=!t.SelectionControl||"Single"!==t.SelectionControl;i.loadFPDialogData(e.getSource(),this,a)},this),y.addCustomData(l),y.addCustomData(u),n.addItem(y)}else"single"===o.toLowerCase()?(a=new sap.m.ComboBox({width:"100%",showSecondaryValues:!0}),a.attachLoadItems(function(e){i.loadFFData(e.getSource())},this),a.addCustomData(l),a.addCustomData(u),n.addItem(a)):(a=new sap.m.MultiComboBox({showSecondaryValues:!0}),a.onBeforeRenderingPicker=function(e){var t=this.getPicker(),a=t.getContent()[0];a&&a instanceof sap.m.List&&a.setShowNoData(!1),jQuery.sap.delayedCall(10,this,function(){sap.m.MultiComboBox.prototype.onBeforeRenderingPicker&&sap.m.MultiComboBox.prototype.onBeforeRenderingPicker.apply(this,arguments),i.loadFFData(this,void 0)},[t])},a.addCustomData(l),a.addCustomData(u),n.addItem(a));break;case"range":this.jumpTo&&(h=this.jumpToData.filter(function(e){return e.Fieldname===m},this)),h&&h.length&&h.length>0&&(l.getValue().DefaultFilterVal=h,r=!0),s=new sap.m.VBox({width:"100%",fitContainer:!0}),n.addItem(s);var v=new sap.m.Label({text:"{i18n>from}"}).addStyleClass("brsFilterPaneLabelColor"),D=new sap.m.ComboBox({width:"100%",customData:[new sap.ui.core.CustomData({key:"fltrLoadInfo",value:t.getObject(t.sPath)}),new sap.ui.core.CustomData({key:"variantData",value:d})]});D.attachLoadItems(function(e){i.loadFFData(e.getSource())},this);var V=new sap.m.Label({text:"{i18n>to}"}).addStyleClass("brsFilterPaneLabelColor"),b=new sap.m.ComboBox({width:"100%",customData:[new sap.ui.core.CustomData({key:"fltrLoadInfo",value:t.getObject(t.sPath)}),new sap.ui.core.CustomData({key:"variantData",value:d})]});b.attachLoadItems(function(e){i.loadFFData(e.getSource())},this),s.addItem(v).addItem(D).addItem(V).addItem(b);break;case"rangenumber":this.jumpTo&&(h=this.jumpToData.filter(function(e){return e.Fieldname===m},this)),h&&h.length&&h.length>0&&(l.getValue().DefaultFilterVal=h,r=!0),s=new sap.m.VBox({width:"100%",fitContainer:!0}),n.addItem(s);var S=new sap.m.Label({text:"{i18n>from}"}).addStyleClass("brsFilterPaneLabelColor"),I=new sap.m.Input({placeholder:this.oBundle.getProperty("numFieldPH"),type:sap.m.InputType.Number,width:"100%",customData:[new sap.ui.core.CustomData({key:"fltrLoadInfo",value:t.getObject(t.sPath)}),new sap.ui.core.CustomData({key:"variantData",value:d})]}),w=new sap.m.Label({text:"{i18n>to}"}).addStyleClass("brsFilterPaneLabelColor"),C=new sap.m.Input({placeholder:this.oBundle.getProperty("numFieldPH"),type:sap.m.InputType.Number,width:"100%",customData:[new sap.ui.core.CustomData({key:"fltrLoadInfo",value:t.getObject(t.sPath)}),new sap.ui.core.CustomData({key:"variantData",value:d})]});s.addItem(S).addItem(I).addItem(w).addItem(C);break;case"rangedate":this.jumpTo&&(h=this.jumpToData.filter(function(e){return e.Fieldname===m},this)),h&&h.length&&h.length>0&&(l.getValue().DefaultFilterVal=h,r=!0);var T=new sap.m.DateRangeSelection({delimiter:" to "});T.addCustomData(l),T.addCustomData(u),n.addItem(T);break;case"specialrange":this.jumpTo&&(sap.ui.Device.browser.msie||sap.ui.Device.browser.edge?(h=this.jumpToData.filter(function(e){return e.Fieldname===m},this))&&h.length>0&&(h=h[0]):h=this.jumpToData.find(function(e){return e.Fieldname===m},this)),h&&(l.getValue().DefaultFilterVal=[{Fieldname:m,filter_op:"eq",val_low:"Custom"}]),r=!0,a=new sap.m.ComboBox({width:"100%",showSecondaryValues:!0}),a.attachLoadItems(function(e){i.loadFFData(e.getSource(),void 0,void 0,"specialFilter")},this),a.attachSelectionChange(function(e){i.onSpecialFiltersSelectionChange(e)},this),a.addCustomData(l),a.addCustomData(u),n.addItem(a),s=new sap.m.VBox({width:"100%",fitContainer:!0}),n.addItem(s);var F=new sap.m.Label({text:"{i18n>from}"}).addStyleClass("brsFilterPaneLabelColor"),M=new sap.m.ComboBox({width:"100%",enabled:!1,showSecondaryValues:!0,customData:new sap.ui.core.CustomData({key:"splFieldKey",value:"from"})}),P=new sap.m.Label({text:"{i18n>to}"}).addStyleClass("brsFilterPaneLabelColor"),_=new sap.m.ComboBox({width:"100%",enabled:!1,showSecondaryValues:!0});s.addItem(F).addItem(M).addItem(P).addItem(_);break;case"specialwostatus":this.jumpTo&&(sap.ui.Device.browser.msie||sap.ui.Device.browser.edge?(h=this.jumpToData.filter(function(e){return e.Fieldname===m},this))&&h.length>0&&(h=h[0]):h=this.jumpToData.find(function(e){return e.Fieldname===m},this)),h&&(l.getValue().DefaultFilterVal=[{Fieldname:m,filter_op:"eq",val_low:h.val_low}]),r=!0,a=new sap.m.ComboBox({width:"100%"}),a.attachSelectionChange(function(e){i.onSpecialFiltersSelectionChange(e,"woStatus",this)},this),a.addCustomData(l),a.addCustomData(u),n.addItem(a);var B=new sap.m.VBox({width:"100%",fitContainer:!0});n.addItem(B);var A=new sap.m.Label({text:"{i18n>woStatus}"}).addStyleClass("brsFilterPaneLabelColor"),x=new sap.m.MultiComboBox({enabled:!1,customData:new sap.ui.core.CustomData({key:"splFieldWO",value:"Status"})}),L=new sap.m.Label({text:"{i18n>woDueDate}"}).addStyleClass("brsFilterPaneLabelColor"),R=new sap.m.DateRangeSelection({enabled:!1,delimiter:" to ",customData:new sap.ui.core.CustomData({key:"splFieldWO",value:"Status"})});B.addItem(A).addItem(x).addItem(L).addItem(R),i.loadSpecialFilters(a,this,"woStatusData");break;case"specialassetdaterange":this.jumpTo&&(sap.ui.Device.browser.msie||sap.ui.Device.browser.edge?(h=this.jumpToData.filter(function(e){return e.Fieldname===m},this))&&h.length>0&&(h=h[0]):h=this.jumpToData.find(function(e){return e.Fieldname===m},this)),h&&(l.getValue().DefaultFilterVal=h),r=!0,a=new sap.m.ComboBox({width:"100%"}),a.attachSelectionChange(function(e){i.onSpecialFiltersSelectionChange(e,"assetDate",this)},this),a.addCustomData(l),a.addCustomData(u),n.addItem(a);var U=new sap.m.DateRangeSelection({enabled:!1,delimiter:" to ",customData:new sap.ui.core.CustomData({key:"splFieldAsset",value:"Date"})});n.addItem(U),i.loadSpecialFilters(a,this,"assetDateData");break;default:n=new sap.m.VBox,jQuery.sap.log.error("SelectionControl not defined for Field: "+t.getProperty("FieldDescription")||t.getProperty("Fieldname"))}return r&&i.setInitialFilters(n,this),n},applyFilterPane:function(e){this.jumpTo=void 0,this.filterApplied=!0,this.setTableConfig(this.variantData,!0)},setTableConfig:function(e,t){if(this.getView().setBusy(!1),!this.filterApplied&&this.oInitialLoadMessage)return this.oInitialLoadMessage.setVisible(!0),this.getView().byId("idBRSTableMasterToolbar").setVisible(!1),void this.getView().byId("idBRSTableMasterVariantReponsiveDataTable").setVisible(!1);this.oInitialLoadMessage.setVisible(!1);var a,i=this.getView().byId("idBRSTableMasterVariantReponsiveDataTable");i.setNoDataText(this.oBundle.getProperty("loadingIndicator")),i.setVisible(!0),this.getView().byId("idBRSTableMasterToolbar").setVisible(!0),i.setBusyIndicatorDelay(0),i.setBusy(!0);"App"!==e.Type&&("_#SUPER"===e.Username?e.UsrVariantID:(e.Username,e.UsrVariantID));this.allDataFlag&&this.allDataFlag,this.dataCall&&this.dataCall.abort();var s=e.Service&&e.Service.startsWith("/")?e.Service:"/"+e.Service,r=e.ServEntity&&e.ServEntity.startsWith("/")?e.ServEntity:"/"+e.ServEntity;this.serviceURL;s||r||sap.m.MessageBox.alert("Incorrect config. Please check app configuration again"),this.setTable(e,a,i,!1)},getXSJSData:function(e,t,a){this.dataCall=$.ajax({url:e,type:"GET",context:this,dataType:"json",contentType:"application/json",success:t,error:a})},setTable:function(e,t,a,i,s){this._sptableFormattingCalled=!1;var n,l,p,d,u=[],g={selectParams:"",sortedArr:[]},c="",h=this.getView().byId("idBRSTableMasterVariantReponsiveDataTableHeader");if(this.cleanUp(),!0===i)n=new sap.ui.model.json.JSONModel,n.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay),n.setData(t.data),l=t._metadata&&t._metadata.Fields?t._metadata.Fields:e.Fields;else{var m=e.Service&&e.Service.startsWith("/")?e.Service:"/"+e.Service;c=e.ServEntity&&e.ServEntity.startsWith("/")?e.ServEntity:"/"+e.ServEntity,l=t&&t._metadata&&t._metadata.Fields?t._metadata.Fields:e.Fields;var f={json:!0,defaultCountMode:sap.ui.model.odata.CountMode.None};if(m.substring(0,3)==="/v2"){n=new sap.ui.model.odata.ODataModel(this.serviceURL+m,f)}else{n=new sap.ui.model.odata.ODataModel("/EZYCOMMERCE_SERVER_NATIVE"+m,f)};n.attachMetadataLoaded(function(e){console.log("Metadata loaded")}),n.attachMetadataFailed(function(e){console.log("Metadata Load Failed")})}a.setModel(n),a.destroyCustomData(),a.attachEvent("updateStarted",null,this.onUpdateStarted,this),a.attachEvent("updateFinished",null,this.onUpdateFinished,this);var y=new sap.m.ColumnListItem({type:"Active",customData:new sap.ui.core.CustomData({key:"itemPressCustomData",value:e})});if(l.forEach(function(t){if(i||(t.Sort_Op&&u.push(t),"true"!==String(t.IsParameter)&&t.Filter_Val&&t.Filter_Val.forEach(function(e){e.val_high?g.filter.push(new sap.ui.model.Filter({path:t.Fieldname,operator:e.filter_op.toLowerCase(),value1:e.val_low,value2:e.val_high,and:!1})):g.filter.push(new sap.ui.model.Filter({path:t.Fieldname,operator:e.filter_op.toLowerCase(),value1:e.val_low,and:!1}))},this)),t.Visible&&"true"===t.Visible.toLowerCase()||"#GROUPINGID"===t.Fieldname){var s=!!t.Aggr_Oper,n=t.ColumnWidth&&!isNaN(parseFloat(t.ColumnWidth,10))?10*parseFloat(t.ColumnWidth,10):180,l=new sap.m.Column({width:n+"px",hAlign:s&&!0===s?"End":"Begin",vAlign:"Middle"}),p=new sap.m.Column({width:n+"px",hAlign:s&&!0===s?"End":"Begin",vAlign:"Middle"});l.setHeader(new sap.m.Text({width:"100%",text:t.FieldDescription})),h.addColumn(l),l.setVisible("#GROUPINGID"!==t.Fieldname),p.setVisible("#GROUPINGID"!==t.Fieldname);var d;switch(t.FieldType&&t.FieldType.toLowerCase()){case"download":d=o.download(t,e,this);break;case"button":d=o.button(t,e,this);break;case"approvereject":d=o.approvereject(t,e,this);break;default:g.selectParams+=t.Fieldname.trim()+",",d=new sap.m.Text({width:"100%",customData:[new sap.ui.core.CustomData({key:"fieldData",value:t}),new sap.ui.core.CustomData({key:"variantData",value:e})]}).bindProperty("text",{path:t.Fieldname,formatter:function(e){var t=this.data("fieldData"),a=this.data("variantData"),i=t.FieldType,s=t.FormatStyle,n=t.DecPlaces,o=e;if("#GROUPINGID"===this.getBinding("text").sPath&&null!==e){var l=this.getParent();l.setType(sap.m.ListType.Inactive),l.rerender(),l.addStyleClass("brsSubTotalRow").addStyleClass("brsDefaultCursor")}if((a&&"sptable_period"===a.AppVariantType.toLowerCase()||"sptable_period_flex"===a.AppVariantType.toLowerCase()||"sptable_lcomm_month"===a.AppVariantType.toLowerCase()||"sptable_lcomm_year"===a.AppVariantType.toLowerCase())&&e){var p=r.spTableFormatter(e,"|");if(p){var d=p.value,u=p.colorCode,g=p.value2;switch(u.toLowerCase()){case"neutral":this.addStyleClass("sptableNeutral");break;case"warning":this.addStyleClass("sptableWarning");break;case"critical":this.addStyleClass("sptableCritical");break;case"good":this.addStyleClass("sptableGood")}}}if(!a||"sptable_period"!==a.AppVariantType.toLowerCase()&&"sptable_period_flex"!==a.AppVariantType.toLowerCase())o=r.formatValue(d||o,i,s,n);else if(g){var c=g.split(",");o="";var h=r.formatValue(d,i,s,n);c.forEach(function(e){o=o+"\\n"+e},this),o=o+"\\n"+h}else o=r.formatValue(d||o,i,s,n);return o}})}y.addCell(d),a.addColumn(p)}},this),!1===i){p=this.getParamterString(l);var v=r.getFilterPaneData(this,!0);if(v&&v.length&&v.length>0&&(g.filter=r._prepareFilters(v,this)),d={path:c,template:y},d.parameters&&d.parameters.custom?d.parameters.custom={AppID:this.variantData.AppID,AppVariantID:this.variantData.AppVariantID}:d.parameters={custom:{AppID:this.variantData.AppID,AppVariantID:this.variantData.AppVariantID}},g.selectParams&&(g.selectParams=g.selectParams.replace(/,([^,]*)$/,""),d.parameters?d.parameters.select=g.selectParams:d.parameters={select:g.selectParams}),u&&u.length>0)var D=u.sort(r.getSortByValFunc("Sort_Order"),this);if(D&&D.length>0){var V=[];D.forEach(function(e){var t=!e.Sort_Op||"ASC"!==e.Sort_Op.toUpperCase();V.push(new sap.ui.model.Sorter({path:e.Fieldname,descending:t}))},this),d.sorter=V}g&&g.filter&&(d.filters=[g.filter]),p&&(d.path+="Parameters"+p)}else d={path:"/",template:y};this.oDelegate&&(a.removeDelegate(this.oDelegate),this.oDelegate=void 0),(e&&"sptable_period"===e.AppVariantType||"sptable_period_flex"===e.AppVariantType||"sptable_lcomm_month"===e.AppVariantType||"sptable_lcomm_year"===e.AppVariantType)&&(this.oDelegate=a.addEventDelegate({onAfterRendering:$.proxy(function(e){this.spTableFormattter(e)},this)})),a.bindAggregation("items",d),a.setNoDataText(this.oBundle.getProperty("noData"))},spTableFormattter:function(e){$(".sptableNeutral").parent().css({background:"#64aadf"}),$(".sptableWarning").parent().css({background:"#e9a427"}),$(".sptableCritical").parent().css({background:"#db3b3c"}),$(".sptableGood").parent().css({background:"#39a651"})},getParamterString:function(e){for(var t,a=0;a<e.length;a++){var i=e[a];if(i.IsParameter&&"true"===i.IsParameter.toLowerCase()&&i.Filter_Val&&i.Filter_Val.length){if(0===i.Filter_Val.length||i.Filter_Val.length>=2){t=void 0;break}t?t+=i.Fieldname+"=\'"+i.Filter_Val[0].val_low+"\', ":t="("+i.Fieldname+"=\'"+i.Filter_Val[0].val_low+"\', "}}return t=void 0!==t?t.replace(/,\\s*$/,"").trim()+")/Results":void 0},onTableItemPress:function(e){var t=e.getParameter("listItem");if("Inactive"!==t.getType()){this.selectedItem=t;var a=t.data("itemPressCustomData");if(!a.AppVariantType||"verticaltable"!==a.AppVariantType.toLowerCase()){t.addStyleClass("brsItemSelected");var i=this.getView().byId("idBRSTableMasterDetailContainer");a.IsDetail&&"true"===a.IsDetail.toLowerCase()?t&&t instanceof sap.m.ColumnListItem&&!t.hasStyleClass("brsSubTotalRow")&&(this.toggleDetailView(!0),s.createDetailSection(a,i,t,this)):this.loadJumpToInfo()}}},loadJumpToInfo:function(e){if(e&&e.getSource()&&e.getSource().data("fromDetail")&&(this.nwFlag=!0),this.selectedItem){var t=this.selectedItem.data("itemPressCustomData"),a=new sap.ui.model.json.JSONModel,i=t.JumpToTargets;if(a.setData(i),i&&i.length&&i.length>0){this.jumpToDialog||(this.jumpToDialog=sap.ui.xmlfragment("brs_demo_tablemaster.fragments.JumpToDialog",this),this.getView().addDependent(this.jumpToDialog));var s=this.jumpToDialog.getContent()[0];s.setModel(a);var r=s.getBindingInfo("items").template,n=new sap.ui.model.Sorter("",!1,function(e){var t=e.getObject();return{key:t.ToAppID,text:t.ToAppDescription}},this.jtComparator);s.bindAggregation("items",{path:"/",template:r,sorter:n}),this.jumpToDialog.isOpen()||this.jumpToDialog.open()}}},closeJumpToDialog:function(e){this.jumpToDialog&&this.jumpToDialog.isOpen()&&this.jumpToDialog.close()},toggleDetailView:function(e){var t=this.getView().byId("idBRSTableMasterScrollContainer");t.setHorizontal(!0),t.setVertical(!1);var a=this.getView().byId("idBRSTableMasterVariantReponsiveDataTableHeader"),i=parseFloat($("#"+a.getId()).css("height")),s=this.getView().byId("idBRSTableMasterScrollContainertBody"),r=this.getView().byId("idBRSTableMasterDetailContainer");this.getView().byId("idBRSTableMasterToolbar").setVisible(!0);var n,o=jQuery.sap.byId(t.getId()),l=jQuery.sap.byId(s.getId());if(!0===e)o.css("height","calc(40% - 50px)"),n=parseFloat(o.css("height")),l.css("height",n-i-16+"px"),r.setHeight("60%").addStyleClass("brsAnimation4ms"),r.setVisible(!0);else{o.css("height","calc(100% - 48px)"),n=parseFloat(o.css("height")),l.css("height",n-i-16+"px"),r.setHeight("0px").addStyleClass("brsAnimation4ms"),r.setVisible(!1);var p=this.getView().byId("idBRSTableMasterVariantReponsiveDataTable"),d=p.getSelectedItem();d&&d instanceof sap.m.ColumnListItem&&d.setSelected(!1)}},onDetailExpand:function(e){var t=e.getSource().getIcon(),a=this.getView().byId("idBRSTableMasterScrollContainer"),i=jQuery.sap.byId(a.getId()),s=this.getView().byId("idBRSTableMasterDetailContainer"),r=this.getView().byId("idBRSTableMasterToolbar");t.match("exit")&&null!==t.match("exit")?(e.getSource().setIcon("sap-icon://full-screen"),i.css("height","calc(40% - 50px)"),s.setHeight("60%"),r.setVisible(!0)):(e.getSource().setIcon("sap-icon://exit-full-screen"),i.css("height","0px"),s.setHeight("100%"),r.setVisible(!1))},onActionBtnPress:function(e){var t=e.getSource(),a=t.data(),i=this.getView().byId("idBRSTableMasterVariantReponsiveDataTable").getSelectedItem();(!i||!i instanceof sap.m.ColumnListItem)&&(i=t.getParent());var s=t.getEventingParent();n.actionBtnSetup(a,i,this,s)},getListItem:function(e){if(e instanceof sap.m.ColumnListItem)return e;this.getListItem(e.getParent())},onUpdateStarted:function(e){e.getSource()},onUpdateFinished:function(e){var t=e.getSource(),a=t.data("_queryInfo"),i=this.getView().byId("idBRSTableMasterVariantSelectB");this.getView().byId("idBRSTableMasterScrollContainertBody").setWidth("auto").setHeight("auto"),t.setWidth("100%"),t.setBusy(!1),jQuery.sap.delayedCall(0,this,function(){var e=jQuery.sap.byId(t.getId()),i=parseFloat(e.css("width"),10);i=i?i-8+"px":"100%",t.setWidth(i),this.toggleDetailView(!1),this.setGrandTotalRow(t),!this.allDataFlag&&a&&a.displayMaxRecordMessage&&"true"===a.displayMaxRecordMessage&&this.displayMaxRecordMessage(a)},[a])},displayMaxRecordMessage:function(e){var t=this,a=this.getView().getModel("i18n"),i=a.getResourceBundle().getText("maxRecMessage",[e.dataCount||"0"]),s=new sap.m.Dialog({icon:"sap-icon://message-information",title:t.oBundle.getProperty("message"),horizontalScrolling:!1,contentWidth:"550px",verticalScrolling:!0,content:[new sap.m.Text({text:i}).addStyleClass("brsWarning")],buttons:[new sap.m.Button({text:t.oBundle.getProperty("loadall"),press:function(e){t.loadAllData(s)}}),new sap.m.Button({text:t.oBundle.getProperty("cancelapplyfilters"),press:$.proxy(function(e){s&&s.isOpen()&&s.close()},this)})]}).addStyleClass("sapUiContentPadding");s.isOpen()||s.open()},loadAllData:function(e){this.allDataFlag=!0,this.intialLoadMessageDisplayed=!0,e&&e.isOpen()&&e.close();var t=this.getView().byId("idBRSTableMasterVariantSelectB").getSelectedKey();this.getTableConfig(t,!1)},setGrandTotalRow:function(e){var t=e.getModel();if(t&&t.getData()){var a=t.getData();if(a&&a instanceof Array){var i=a.length,s=e.getItems()[i-1];if(s){s.getCells().forEach(function(e){if("#GROUPINGID"===e.getBindingPath("text")){var t=e.getBindingInfo("text");if(t&&t.binding&&null!==t.binding.getValue()&&t.binding.getValue()>0){var a=s.getCells()[0];a&&a instanceof sap.m.Text&&a.setText(this.getView().getModel("i18n").getProperty("grandTotal")),s.setType(sap.m.ListType.Inactive),s.rerender(),s.addStyleClass("brsGrandTotalRow").addStyleClass("brsDefaultCursor")}}},this)}}}},onVariantSettingBtnPressed:function(e){var t;this._variantFragment&&this._variantFragment.destroy(!0),this._variantFragment=sap.ui.xmlfragment("brs_demo_tablemaster.fragments.VariantDialog",this),this._variantFragment.setBusyIndicatorDelay(0),this.getView().addDependent(this._variantFragment),t=new sap.ui.model.json.JSONModel,t.setDefaultBindingMode(sap.ui.model.BindingMode.OneWay),this.getView().setModel(t,"tableVariantAFModel"),t.setData(),(!e||e&&!0!==e&&!this._variantFragment.isOpen())&&this._variantFragment.open(),this._variantFragment.setBusy(!0),this.loadVariantConfigData(t)},loadVariantConfigData:function(e){var t=this.getView().byId("idBRSTableMasterVariantSelectB");if(!t.getSelectedItem()||!t.getSelectedItem().data("variantData"))return void this._variantFragment.setBusy(!1);var a=t.getSelectedItem().data("variantData");if(a){var i=JSON.parse(JSON.stringify(a));i.Fields.forEach(function(e,t){e.DisplayOrder=t,"DESC"===e.Sort_Op?e.Sort_Op="Descending":"ASC"===e.Sort_Op&&(e.Sort_Op="Ascending")},this),i&&i.Fields&&i.Fields.length>100?e.setSizeLimit(i.Fields.length):e.setSizeLimit(100),e.setData(i);var s,r=[];a.Fields.forEach(function(e){e.Filter_Val&&e.Filter_Val.length&&e.Filter_Val.length>0&&(e.Filter_Val instanceof Object?e.Filter_Val.forEach(function(e){s={Fieldname:e.Fieldname,filter_op:e.filter_op.toUpperCase()},e.val_low&&(s.val_low=e.val_low),e.val_high&&(s.val_high=e.val_high),r.push(s)},this):(s={Fieldname:e.Fieldname,filter_op:"EQ",val_low:e.Filter_Val,val_high:null},r.push(s)))},this);var n=new sap.ui.model.json.JSONModel(r);n.setDefaultBindingMode(sap.ui.model.BindingMode.TwoWay),this.getView().setModel(n,"tableVarFilterModel")}else sap.m.MessageBox.alert(this.oBundle.getProperty("configLoadErr"));this._variantFragment.setBusy(!1)},changeVariantItem:function(e){var t,a,i=e.sId,s=e.getSource();switch(i){case"addSortItem":a=e.getParameter("sortItemData"),t={columnKey:a.getColumnKey(),key:e.getParameter("key"),operation:a.getOperation()},s.addSortItem(new sap.m.P13nSortItem(t));break;case"addFilterItem":a=e.getParameter("filterItemData"),t={columnKey:a.getProperty("columnKey"),operation:a.getProperty("operation"),value1:a.getProperty("value1")||null,value2:a.getProperty("value2")||null,exclude:a.getProperty("exclude")||!1},s.addFilterItem(new sap.m.P13nFilterItem(t));break;case"addGroupItem":a=e.getParameter("groupItemData"),t={columnKey:a.getProperty("columnKey"),key:e.getParameter("index")},s.addGroupItem(new sap.m.P13nGroupItem(t));break;case"removeSortItem":s.removeSortItem(s.getSortItems()[e.getParameter("index")]);break;case"removeFilterItem":s.removeFilterItem(s.getFilterItems()[e.getParameter("index")]);break;case"removeGroupItem":s.removeGroupItem(s.getGroupItems()[e.getParameter("index")])}},reorderColumnsItem:function(e,t){var a=e.getParameter("existingItems")[0];a.setIndex(a.getIndex())},handleOK:function(e){if(e.getSource()){this._confirmVariantDialog||(this._confirmVariantDialog=sap.ui.xmlfragment("brs_demo_tablemaster.fragments.VariantSaveConfirmation",this),this._confirmVariantDialog.setBusyIndicatorDelay(0)),this.getView().addDependent(this._confirmVariantDialog);var t=this.getView().getModel("tableVariantAFModel").getData();if(t&&"User"===t.Type&&"_#SUPER"!==t.Username){var a=sap.ui.getCore().byId("idBRSTableMasterVariantSaveID"),i=sap.ui.getCore().byId("idBRSTableMasterVariantSaveDesc"),s=sap.ui.getCore().byId("idBRSTableMasterVariantSaveSuperChk");t.Username&&"_#SUPER"!==t.Username&&s.setEnabled(!1),a&&a.setValue(t.UsrVariantID),i&&i.setValue(t.Description)}}this._confirmVariantDialog.isOpen()||this._confirmVariantDialog.open()},handleCancel:function(e){var t=e.getSource();t&&t instanceof sap.m.P13nDialog&&t.isOpen()&&t.close()},handleReset:function(){this.onVariantSettingBtnPressed()},onVariantAction:function(e,a){var i,s;if(this._confirmVariantDialog&&this._confirmVariantDialog.setBusyIndicatorDelay(0),i=e.getSource(),"cancel"===(s=i.data("data")))this._confirmVariantDialog.close();else{var r=this.getView().getModel("tableVariantAFModel").getData().Description,n="$DEFAULT",o="$DEFAULT "+r;r.startsWith("$")&&(o=r);var l=sap.ui.getCore().byId("idBRSTableMasterVariantSaveSuperChk");if("save"===s){var p=sap.ui.getCore().byId("idBRSTableMasterVariantSaveID"),d=sap.ui.getCore().byId("idBRSTableMasterVariantSaveDesc");if(!p||!p.getValue())return void t.alert(this.oBundle.getProperty("varSaveErr"));if(n=p.getValue().trim(),!d||!d.getValue())return void t.alert(this.oBundle.getProperty("varSaveErr"));o=d.getValue().trim()}else if("apply"===s&&!1!==a){var u=l.getSelected()||!1;if(u)return void t.alert(this.oBundle.getProperty("sVarSaveErr"))}this._confirmVariantDialog&&this._confirmVariantDialog.setBusy(!0);var g={AppID:this.getView().getModel("tableVariantAFModel").getData().AppID,AppVariantID:this.getView().getModel("tableVariantAFModel").getData().AppVariantID,Username:this.getView().getModel("tableVariantAFModel").getData().Username,UsrVariantID:n,UsrVariantDescription:o,ChartType:null,\nSUserVariantID:"_#SUPER"===this.getView().getModel("tableVariantAFModel").getData().Username?this.getView().getModel("tableVariantAFModel").getData().UsrVariantID:null,IsSuper:l&&l.getSelected()?l.getSelected()+"":"false",Fields:[]};g.IsSuper&&"false"===g.IsSuper&&delete g.IsSuper;var c=[],h=this._variantFragment.getPanels(),m=h[0];if(m&&m instanceof sap.m.P13nColumnsPanel){m.getColumnsItems().forEach(function(e){c.indexOf(e.getColumnKey())>-1&&jQuery.sap.log.error("Duplicate Field:"+e.getColumnKey()),c.push(e.getColumnKey());var t={Fieldname:e.getColumnKey(),FieldDescription:null,Aggr_Oper:null,Filterable:null,Sort:null,Visible:e.getVisible()+"",Filter_Val:null,DisplayOrder:e.getVisible&&void 0!==e.getIndex()?e.getIndex()+1:null,FieldGroup:null,SubTotal:null,FieldType:null,Sortable:null,Sort_Op:null,Sort_Order:null,ChartRole:null,IsParameter:e.data("IsParameter")};!t.IsParameter||"true"!==t.IsParameter.toLowerCase()&&!0!==t.IsParameter||(t.Visible=null,t.DisplayOrder=null),g.Fields.push(t)},this)}var f=h[1];if(f&&f instanceof sap.m.P13nSortPanel){f.getSortItems().forEach(function(e,t){var a=e.getColumnKey(),i=c.indexOf(a);if(-1!==i){var s=g.Fields[i];s.Sortable=!0,s.Sort_Op="Ascending"===e.getOperation()?"ASC":"DESC",s.Sort_Order=t+1}},this)}var y=h[2];if(y&&y instanceof sap.m.P13nFilterPanel){y.getFilterItems().forEach(function(e){var t=e.getColumnKey(),a=c.indexOf(t);if(-1!==a){var i=g.Fields[a];i.Filterable=!0,null===i.Filter_Val&&(i.Filter_Val=new Array),i.Filter_Val.push({Fieldname:t,filter_op:e.getOperation().toLowerCase(),val_low:e.getValue1(),val_high:e.getValue2()||null})}},this)}var v=h[3];if(v&&v instanceof sap.m.P13nGroupPanel){v.getGroupItems().forEach(function(e,t){var a=e.getColumnKey(),i=c.indexOf(a);if(-1!==i){g.Fields[i].SubTotal=t+1+""||null}},this)}if(!1===a)return this._confirmVariantDialog&&this._confirmVariantDialog.setBusy(!1),{newVariantModelData:g,tempArr:c};this.saveVariantConfig(g,!1)}},saveVariantConfig:function(e,a){this.getView().setBusy(!0),this._bCallMergeForlm=void 0;var i=e.AppVariantID+" "+e.UsrVariantID;e.IsSuper&&(i+=" _#SUPER");var s=this.serviceURL+"/GetConfig.xsjs?AppID="+e.AppID;e.IsSuper&&"true"===e.IsSuper||(s+="&UsrVariantID="+e.UsrVariantID),$.ajax({url:s,type:"POST",data:JSON.stringify(e),contentType:"application/json",context:this,success:function(e){sap.ui.core.BusyIndicator.hide(),this.intialLoadMessageDisplayed=!0,this._variantFragment&&this._variantFragment.close(),this._confirmVariantDialog&&(this._confirmVariantDialog.setBusy(!1),this._confirmVariantDialog.close());var t=this.getView().getModel("variantModel");e.results.Variants&&e.results.Variants.length>0&&(e.results.Variants=e.results.Variants.filter(function(e){return"standard"===e.AppVariantType.toLowerCase()||"standard_updt"===e.AppVariantType.toLowerCase()||"verticaltable"===e.AppVariantType.toLowerCase()||"sptable_period"===e.AppVariantType.toLowerCase()||"sptable_period_flex"===e.AppVariantType.toLowerCase()||"sptable_lcomm_month"===e.AppVariantType.toLowerCase()||"sptable_lcomm_year"===e.AppVariantType.toLowerCase()||"spltable_rff"===e.AppVariantType.toLowerCase()}),r.sortVariantList(e.results.Variants)),t.setData(e.results.Variants),t.refresh(!0),sap.m.MessageToast.show(this.oBundle.getProperty("varSaveSuccess")),this.getTableConfig(i,!1)},error:function(e){sap.ui.core.BusyIndicator.hide(),this._confirmVariantDialog&&this._confirmVariantDialog.setBusy(!1),this.getView().setBusy(!1),t.alert(this.oBundle.getProperty("err_gen"))}})},onExportBtnPressed:function(e){var t=e.getSource();this._exportCSV(t)},_csvDataExport:function(e){let t=e.substring(3);$.ajax({url:"/EZYCOMMERCE_SERVER"+t,type:"GET",async:!1,context:this,contentType:"application/json",success:function(e){this.getView().byId("idBRSTableMasterVariantReponsiveDataTable").getModel();let t={};t.results=e.value;var a=e.value,i=[],r={};for(let s=0;s<a.length;s++)(r=a[s]).dateString=r.Date.toString(),r.dateString=r.dateString.substring(0,10),i.push(r);t.resultsNew=i;var n=new sap.ui.model.json.JSONModel;n.setData(t);var o=new l({exportType:new d({fileExtension:"csv",separatorChar:","}),models:n,rows:{path:"/resultsNew"},columns:[{name:"Certificate",template:{content:"{Certificate}"}},{name:"CustomerName",template:{content:"{CustomerName}"}},{name:"Heat No",template:{content:"{HeatAggr}"}},{name:"Batch Number",template:{content:"{BundleAggr}"}},{name:"Certificate Date",template:{content:"{dateString}"}},{name:"Despatch Advice",template:{content:"{DeliveryNo}"}},{name:"Sales Order",template:{content:"{SalesOrder}"}},{name:"Customer Order",template:{content:"{CustomerOrder}"}},{name:"Material",template:{content:"{MaterialAggr}"}}]});console.log(o),o.saveFile().catch(function(e){console.log(e)}).then(function(){o.destroy()})},error:function(e){console.log(e)}})},_exportCSV:function(e){var t,a=this.variantData.Service+this.variantData.ServEntity+"?$top=100000&$skip=0&AppID="+this.variantData.AppID+"&AppVariantID="+this.variantData.AppVariantID+"&csv=true",i=r.getFilterPaneData(this,!0);i&&i.length&&i.length>0&&(t=r._prepareFiltersAsString(i,this)),t&&t.length>0&&(a+="&$filter="+t),"TestCertificates"===this.variantData.ServEntity?this._csvDataExport(a):window.open("/EZYCOMMERCE_SERVER_NATIVE"+a)},onExportSelection:function(e){var a=this,i=e.getSource(),s=i.data("csvparam");"CSVOutputWithComments"===s?t.show(a.oBundle.getProperty("commentsexportmsg"),{icon:sap.m.MessageBox.Icon.WARNING,actions:[sap.m.MessageBox.Action.YES,sap.m.MessageBox.Action.NO],title:a.oBundle.getProperty("warning"),initialFocus:t.Action.NO,onClose:function(e){e===sap.m.MessageBox.Action.YES&&a.exportData(s)}}):a.exportData(s)},exportData:function(e){var a=this.getView().byId("idBRSTableMasterVariantSelectB");if(a&&a.getItems().length>0){var i=a.getSelectedItem();if(i){var s=i.data("variantData"),r=s.AppID,n=s.AppVariantID,o="";if("App"!==s.Type&&(o="_#SUPER"===s.Username?"&UserVariant="+s.UsrVariantID+"&IsSuper=\'true\'":"&Username="+s.Username+"&UserVariant="+s.UsrVariantID),r&&n){if(s.AppVariantType&&"spltable_rff"===s.AppVariantType){this.getView().setBusy(!0);var l=this.serviceURL+"/BRS/HAA/services/GetData.xsjs?AppID="+r+"&AppVariant="+n+o+"&RFF";$.ajax({url:l,type:"GET",async:!1,context:this,contentType:"application/json",success:function(e){this.getView().setBusy(!1);var t=i.getKey();this.getTableConfig(t,!1)},error:function(e){this.getView().setBusy(!1)}})}var p=(new Date).getTimezoneOffset(),d=this.serviceURL+"/BRS/HAA/services/GetData.xsjs?AppID="+r+"&AppVariant="+n+o+"&tz="+p+"&"+e;window.open(d)}else t.alert(this.oBundle.getProperty("dataExportErr"))}else t.alert(this.oBundle.getProperty("dataExportErr"))}else t.alert(this.oBundle.getProperty("dataExportErr"))},cleanUp:function(){this.toggleDetailView(!1),this.getView().byId("idInitialLoadVB").setVisible(!1);var e=this.getView().byId("idBRSTableMasterVariantReponsiveDataTableHeader");e.setVisible(!0);var t=this.getView().byId("idBRSTableMasterVariantReponsiveDataTable");t.setVisible(!0),e&&e instanceof sap.m.Table&&e.getColumns().length>0&&e.destroyColumns(),t&&t instanceof sap.m.Table&&(t.getColumns().length>0&&t.destroyColumns(),t.getItems().length>0&&t.destroyItems())},toggleFilterPane:function(e){var t=this.getView().byId("idBRSTableMasterMainContainer"),a=t.hasStyleClass("brsFilterPaneSideContentShow"),i=this.getView().byId("idBRSFilterToggleL").getItems()[0];!0===a?(t.removeStyleClass("brsFilterPaneSideContentShow"),t.addStyleClass("brsFilterPaneSideContentHide"),i.addStyleClass("brsFilterPaneSideContentHide")):(t.removeStyleClass("brsFilterPaneSideContentHide"),t.addStyleClass("brsFilterPaneSideContentShow"),i.removeStyleClass("brsFilterPaneSideContentHide")),this.getView().byId("idBRSTableMasterScrollContainertBody").setWidth("auto"),this.getView().byId("idBRSTableMasterScrollContainertBody").setHeight("auto");var s=this.getView().byId("idBRSTableMasterVariantReponsiveDataTableHeader"),r=this.getView().byId("idBRSTableMasterVariantReponsiveDataTable");r.setWidth("100%"),s.setWidth("100%"),r.setBusy(!1),jQuery.sap.delayedCall(2,this,function(){var e=jQuery.sap.byId(s.getId()),t=parseFloat(e.css("width"),10);s.setWidth(t),r.setWidth(t),this.setGrandTotalRow(r)},this)},jumpToTarget:function(e){this.jumpToCalled=!0;var a,i,s=e.getParameter("listItem"),n=s.data("jumpTblData"),o=this.selectedItem,l=[],p=[];if(n&&n.ExcludeFieldList&&(p=n.ExcludeFieldList.split(",").map(function(e){return e.trim()},this)),o&&o instanceof sap.m.ColumnListItem){o.getCells().forEach(function(e){var t=e.data("fieldData"),a=e.data("variantData");if(t&&t.hasOwnProperty("Aggr_Oper")&&null===t.Aggr_Oper&&e&&e.getText()){var i=t.FieldType;if(i){var s,n=e.getBinding("text").getValue(),o=new Date(n);if(!o)return;switch(i.toLowerCase()){case"date":s=parseInt(o.getMonth(),10)+1<10?s="0"+(parseInt(o.getMonth(),10)+1):parseInt(o.getMonth(),10)+1,l.push({Fieldname:t.Fieldname,filter_op:"eq",val_low:o.getFullYear()+"-"+s+"-"+o.getDate()})}}else{var p=e.getText();r.getIdforDescription(function(e,a){if(e&&"noMappedId"===e)l.push({Fieldname:t.Fieldname,filter_op:"eq",val_low:p});else if(e&&!1!==e&&e.results.length>0){var i=e.results[0];l.push({Fieldname:a,filter_op:"eq",val_low:i[a]})}},this,a,t.Fieldname,p)}}},this)}if(sap.ushell){n.ToUsername?(a=n.ToUsrVariant,i="User"):(a=n.ToAppVariant,i="App");var d=this.getAppTypeToNavigate(n.ToAppID,!0);if(!1!==d){var u,g=sap.ushell.Container.getService("CrossApplicationNavigation");switch(d.toUpperCase()){case"REPORT":u="#brsdemotablemaster-Display";break;case"PORTFOLIO":u="#brscreapportfoliomanagement-Display";break;case"CASE":u="#brscreapcaseinteractions-Display";break;default:u="#brsdemochartmaster-Display"}g.isIntentSupported([u],this.getOwnerComponent()).done($.proxy(function(e){if(e&&e[u]&&!0===e[u].supported){sap.ui.core.BusyIndicator.show(0);var s;r.saveJumptoInfo(this,$.proxy(function(e){s=e},this),$.proxy(function(e){},this),l,p);var o={semanticObject:"",action:""},d=u.split("-");o.semanticObject=d[0].substr(1,d[0].length),o.action=d[1];var c={appId:n.ToAppID,appVariantId:a,uv:i};s&&(c.jtID=s);var h=g&&g.hrefForExternal({target:o,params:c})||"";if(this.nwFlag&&!0===this.nwFlag){sap.ui.core.BusyIndicator.hide();var m=window.location.href.split("#")[0]+h;sap.m.URLHelper.redirect(m,!0)}else g.toExternal({target:{shellHash:h}})}else sap.ui.core.BusyIndicator.hide(),t.alert(this.oBundle.getProperty("navNotPossible"))},this))}}else t.alert(this.oBundle.getProperty("navNotPossible"))},getAppTypeToNavigate:function(e,t){var i=!1,s="",r=this.serviceURL+"/BRS/HAA/services/AppConfig.xsodata";return new sap.ui.model.odata.ODataModel(r,{json:!0,defaultCountMode:"None"}).read("/Application",{async:!1,urlParameters:{$select:"AppType,AppDescription",$filter:["AppID eq \'"+e+"\'"]},success:$.proxy(function(e){if(e&&e.results&&e.results.length&&e.results.length>0&&(i=e.results[0].AppType,s=e.results[0].AppDescription||""),!t)if(this.getView().getModel("appModel"))this.getView().getModel("appModel").getData().appDesc=s,this.getView().getModel("appModel").refresh(!0);else{var r=new a;r.setData({appDesc:s||""}),this.getView().setModel(r,"appModel")}},this),error:$.proxy(function(e){jQuery.sap.log.error("err"+e.statusText),this.getView().getModel("appModel")&&this.getView().getModel("appModel").setData({})},this)}),i},_onAppHeaderAction:function(e){var a=e.getSource().data("action");if("duplicate"===a)return void window.open(location.href);var i=this.getOwnerComponent();if(sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService("CrossApplicationNavigation")){sap.ui.core.BusyIndicator.show(0);var s=sap.ushell.Container.getService("CrossApplicationNavigation");switch(a){case"back":s.historyBack();break;case"home":;s.isIntentSupported(["#Home-show"],i).done($.proxy(function(e){e&&e["#Home-show"]&&!0===e["#Home-show"].supported?s.toExternal({target:{shellHash:"#Home-show"}}):(sap.ui.core.BusyIndicator.hide(),t.alert(this.oBundle.getProperty("navNotPossible")))}))}}},booleanFormatter:function(e){return!!(e&&"true"===e.toLowerCase()||"X"===e||"x"===e)},reverseBooleanFormatter:function(e){return!(e&&"true"===e.toLowerCase()||"X"===e||"x"===e)},filterOperatorFormatter:function(e){if(e&&"bt"===e.toLowerCase())return"BT"},variantIDFormatter:function(e){if(e)return"App"===e.Type?e.AppVariantID:"User"===e.Type&&"_#SUPER"===e.Username?e.AppVariantID+" "+e.UsrVariantID+" "+e.Username:e.AppVariantID+" "+e.UsrVariantID},jtComparator:function(e,t){var a=e.ToAppVariant,i=t.ToAppVariant;return"User"!==e.ToUsername&&"_#SUPER"!==e.ToUsername||(a=e.ToUsrVariant),"User"!==t.ToUsername&&"_#SUPER"!==t.ToUsername||(i=t.ToUsrVariant),a<i?-1:a>i?1:0},onSaveTableData:function(e){var a,i=!1,s=this.getView().byId("idBRSTableMasterVariantReponsiveDataTable"),r=this.getView().byId("idBRSTableMasterVariantSelectB"),n=r.getSelectedItem().data("variantData"),o=s.getModel().getObject("/"),l=n.UpdtService;if(l&&l.indexOf("xsjs")>-1?i=!0:l&&l.indexOf("xsodata")>-1&&(i=!1),!l)return t.alert(this.oBundle.getProperty("dataSaveErr")),void jQuery.sap.log.error("could not find UpdtService in config");if(this.getView().setBusy(!0),i)a=this.serviceURL+l,$.ajax({url:a,type:"POST",context:this,data:JSON.stringify(o),contentType:"application/json",success:function(e){this.getView().setBusy(!1),t.information(this.oBundle.getProperty("dataSaveSucc")),this.getTableConfig(r.getSelectedKey(),void 0,!0)},error:function(e){var a=!!this.getView().$().closest(".sapUiSizeCompact").length,i=e.responseJSON;this.getView().setBusy(!1),t.show(i.message,{icon:"sap-icon://error",title:this.oBundle.getProperty("error"),actions:[t.Action.OK],defaultAction:t.Action.OK,details:i.details,styleClass:a?"sapUiSizeCompact":""}),jQuery.sap.log.error("Error while posting data: "+e)}});else{var p=n.UpdtServEntity;if(!p)return this.getView().setBusy(!1),t.alert(this.oBundle.getProperty("dataSaveErr")),void jQuery.sap.log.error("could not find UpdtServiceEntity in config");a=p.startsWith("/")?p:"/"+p;var d=new sap.ui.model.odata.ODataModel(this.serviceURL+l,{json:!0,useBatch:!0}),u=[];o.forEach(function(e){u.push(d.createBatchOperation(a,"POST",e))},this),d.addBatchChangeOperations(u),d.submitBatch($.proxy(function(e){this.getView().setBusy(!1),t.information(this.oBundle.getProperty("dataSaveSucc"))},this),$.proxy(function(e){this.getView().setBusy(!1),t.alert(this.oBundle.getProperty("dataSaveErr")),jQuery.sap.log.error("Error while posting data: "+e)},this))}},checkDuplicateVariant:function(e){var t=e.getSource(),a=this.getView().getModel("variantModel").getData(),i=e.getParameter("value");if(this._confirmVariantDialog)var s=this._confirmVariantDialog.getAggregation("buttons");if(s&&(s[0].setEnabled(!0),s[1].setEnabled(!0)),sap.ui.getCore().byId("idBRSTableMasterVariantSaveSuperChk").setEnabled(!0),a&&a.length){var r=a.filter(function(e){return"App"===e.Type?e.AppVariantID===i:e.UsrVariantID===i},this);if(r&&r.length&&r.length>0){var n=r[0].Type,o=r[0].UsrVariantID;"App"===n?(t.setValueState(sap.ui.core.ValueState.Error),t.setValueStateText("Please change the variant ID"),s&&(s[0].setEnabled(!1),s[1].setEnabled(!1))):"User"===n&&"$DEFAULT"===o?sap.ui.getCore().byId("idBRSTableMasterVariantSaveSuperChk").setEnabled(!1):(t.setValueState(sap.ui.core.ValueState.Warning),t.setValueStateText("Currently overriding a Sharable Variant. Please reconsider"))}}},onManageVariants:function(e){var i=sap.ui.getCore().byId("idVariantsManage--idVariantManageTable");if(e&&e.getSource()&&e.getSource().data("action")){var s=e.getSource().data("action");switch(s){case"delete":this.getView().setBusy(!0),this.variantsManageDialog.isOpen()&&this.variantsManageDialog.close();var r=i.getSelectedItems();if(r&&r.length&&r.length>0){var n=[],o=r[0].data("variantData").AppID;r.forEach(function(e){var t=e.data("variantData");n.push({AppVariantID:t.AppVariantID,Username:t.Username,UsrVariantID:t.UsrVariantID})},this);var l=this.serviceURL+"/GetConfig.xsjs?Delete&AppID="+o,p=this.getView().byId("idBRSTableMasterVariantSelectB").getSelectedItem().data("variantData");$.ajax({url:l,type:"POST",context:this,contentType:"application/json",data:JSON.stringify(n),success:function(){sap.m.MessageToast.show(this.oBundle.getProperty("varDelSuccess"));var e;e="User"===p.Type?p.UsrVariantID:p.AppVariantID,this.getVariantConfig(p.AppID,e,p.Type)},error:function(e){this.getView().setBusy(!1),t.alert(this.oBundle.getProperty("err_gen"),{onClose:$.proxy(function(){var e;e="User"===p.Type?p.UsrVariantID:p.AppVariantID,this.getVariantConfig(p.AppID,e,p.Type)},this)})}})}else this.getView().setBusy(!1);break;case"selectAll":case"deselectAll":var d=!0;if("deselectAll"===s?(d=!1,sap.ui.getCore().byId("idVariantsManage--idVariantManageSelectAll").setVisible(!0),sap.ui.getCore().byId("idVariantsManage--idVariantManageDeSelectAll").setVisible(!1)):(sap.ui.getCore().byId("idVariantsManage--idVariantManageSelectAll").setVisible(!1),sap.ui.getCore().byId("idVariantsManage--idVariantManageDeSelectAll").setVisible(!0)),i&&i instanceof sap.m.List){i.getItems().forEach(function(e){e.setSelected(d)},this)}break;case"close":this.variantsManageDialog.isOpen()&&this.variantsManageDialog.close()}}else{this.variantsManageDialog||(this.variantsManageDialog=sap.ui.xmlfragment("idVariantsManage","brs_demo_tablemaster.fragments.UserVariantManagement",this),this.getView().addDependent(this.variantsManageDialog),this.variantsManageDialog.setModel(this.oBundle)),sap.ui.getCore().byId("idVariantsManage--idVariantManageSelectAll").setVisible(!0),sap.ui.getCore().byId("idVariantsManage--idVariantManageDeSelectAll").setVisible(!1);var u=sap.ui.getCore().byId("idVariantsManage--idVariantManageDeleteBtn");this.variantsManageDialog.setBusyIndicatorDelay(0),this.variantsManageDialog.setBusy(!0),this.variantsManageDialog.isOpen()||this.variantsManageDialog.open();var g=this.getView().getModel("variantModel");if(g&&g.getData()&&g.getData().length>0){var c=[];c=g.getData().filter(function(e){return e&&"User"===e.Type&&"_#SUPER"!==e.Username},this),c.length>0?u.setEnabled(!0):u.setEnabled(!1);var h=new a;h.setData(c,!1),this.getView().setModel(h,"uvModel"),h.refresh(!0),this.variantsManageDialog.setBusy(!1)}else this.variantsManageDialog.setBusy(!1)}}})});',
"brs_demo_tablemaster/FilterPane/FilterPane.js":'jQuery.sap.declare("brs_demo_tablemaster.controller.FilterPane"),sap.ui.define(["sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/ui/model/odata/ODataModel","brs_demo_tablemaster/utilities/Utilities","brs_demo_tablemaster/FilterPane/FilterUtils"],function(e,t,a,l,r){return{loadFilterUI:function(e,a){this.controller=a;var l=a.getView().byId("idBRSFilterPaneForm");let variantDataCount=e;this.setAdvancedFilterCount(a,"idBRSFilterPaneAdvL",variantDataCount),l&&l.setBusy(!0);var r=new t;e&&e.FilterPanel&&e.FilterPanel.Fields&&(r.setData(variantDataCount.FilterPanel.Fields),r.setSizeLimit(variantDataCount.FilterPanel.Fields.length),a.getView().setModel(r,"filterPaneDataModel")),jQuery.sap.delayedCall(100,a,function(){l.setBusy(!1)},l)},setInitialFilters:function(e,t){var a,l,r=e.data("selectionControl");switch(r&&r.toLowerCase()){case"single":case"multi":if((a=e.getItems()[1])&&a instanceof sap.m.MultiInput){var i=a.data("fltrLoadInfo"),s=!i.SelectionControl||"Single"!==i.SelectionControl;this.loadFPDialogData(a,t,s,!0)}else a&&(a instanceof sap.m.ComboBox||a instanceof sap.m.MultiComboBox)&&this.loadFFData(a,!0);break;case"specialrange":case"range":a=e.getItems()[1],a&&(a instanceof sap.m.ComboBox||a instanceof sap.m.MultiComboBox)&&this.loadFFData(a,!0);break;case"rangenumber":a=e.getItems()[1],a&&a instanceof sap.m.Input&&(l=a.data("fltrLoadInfo").DefaultFilterVal[0],l.val_low&&!isNaN(l.val_low)&&a.setDateValue(l.val_low),l.val_high&&!isNaN(l.val_high)&&a.setSecondDateValue(l.val_high));break;case"rangedate":a=e.getItems()[1],a&&a instanceof sap.m.DateRangeSelection&&(l=a.data("fltrLoadInfo").DefaultFilterVal[0],l.val_low&&!isNaN(new Date(l.val_low))&&a.setDateValue(new Date(l.val_low)),l.val_high&&!isNaN(new Date(l.val_high))&&a.setSecondDateValue(new Date(l.val_high)))}},loadFPDialogData:function(t,l,r,i){var s=t.data("fltrLoadInfo"),o=t.data("variantData");if(!s&&!o)return e.alert(l.oBundle.getProperty("err_gen")),void jQuery.sap.log.error("No Filter Pane Info or variant Data");t.setBusyIndicatorDelay(0),t.setBusy(!1);var n=o.ServEntity,d=o.Service.startsWith("/")?l.serviceURL+o.Service:l.serviceURL+"/"+o.Service;if(n.substring(0,1)==="z"){d=d.replace("EZYCOMMERCE_SERVER","EZYCOMMERCE_SERVER_NATIVE")};var c=new a(d,{json:!0,defaultCountMode:sap.ui.model.odata.CountMode.None});c.setDefaultCountMode(sap.ui.model.odata.CountMode.None);var u=this.createParamStr(o.Fields);if(!1!==u){void 0!==u&&(n+="Parameters"+u);var m=s.Fieldname+",";s.AddDisplayField&&(m=m+s.AddDisplayField+","),m=m.replace(/,([^,]*)$/,"$1");var f=new sap.m.StandardListItem({title:s.AddDisplayField?"{"+s.AddDisplayField+"}":"",info:"{"+s.Fieldname+"}"}),v=new sap.m.SelectDialog({title:s.FieldDescription,multiSelect:r,rememberSelections:!0}).addStyleClass("fpSelectDialog");v.addCustomData(new sap.ui.core.CustomData({key:"fltrLoadInfo",value:s})),v.attachLiveChange(function(e){var t,a=e.getSource().data("fltrLoadInfo"),l=e.getSource().getBinding("items"),r=e.getParameter("value"),i=new sap.ui.model.Filter(a.Fieldname,sap.ui.model.FilterOperator.Contains,r);if(a.AddDisplayField){var s;s="Certificates_FP1"==a.FilterPanelID?new sap.ui.model.Filter({path:a.AddDisplayField,operator:sap.ui.model.FilterOperator.Contains,value1:r,caseSensitive:!1}):new sap.ui.model.Filter(a.AddDisplayField,sap.ui.model.FilterOperator.Contains,r)}t=s?new sap.ui.model.Filter({filters:[i,s],and:!1}):i,l.filter([t])},this);v.attachConfirm({srcCtrl:t},function(e,t){var a=e.getParameter("selectedContexts"),l=t.srcCtrl;l.destroyTokens();var r=l.data("fltrLoadInfo");a.forEach(function(e){l.addToken(new sap.m.Token({key:e.getProperty(r.Fieldname),text:e.getProperty(r.AddDisplayField||r.Fieldname)}))},this)},this),v.setModel(c),v.bindAggregation("items",{path:"/"+n,parameters:{select:m,custom:{AppID:this.controller.variantData.AppID,AppVariantID:this.controller.variantData.AppVariantID}},template:f});var g;if(i&&!0===i){t.setBusy(!0);var h=s.DefaultFilterVal;if(!h||!h.length||!h.length>0)return;g=[],h.forEach(function(e){e.val_low&&g.push(e.val_low)},this);var p=c.getData();if(!p)return void t.setBusy(!1);g&&g.length>0&&p.filter(function(e){g.indexOf(e[s.Fieldname])>-1&&t.addToken(new sap.m.Token({key:e[s.Fieldname],text:e[s.AddDisplayField||s.Fieldname]}))},this)}else{var F=v.getItems();g=t.getTokens(),F.forEach(function(e){var t=e;e.setSelected(!1),g.forEach(function(e){e.getKey()===t.getInfo()&&t.setSelected(!0)},this)},this),v.open()}t.setBusy(!1)}},loadFFData:function(e,l,r,i){var s,o,n,d,c;if(s=e.getId(),n=e.data("fltrLoadInfo"),d=e.data("variantData"),o=sap.ui.getCore().byId(s),n){var u,m,f=n.ValueHelpType,v=n.SelectionControl,g=d.ServEntity;switch(f.toLowerCase()){case"query":if("rangedate"===v.toLowerCase())return void this.setSelectedValues(o,n,d);if(!r&&o.getModel())return void o.setBusy(!1);o.setBusy(!0);var h=new t;h.setData({}),m=d.Service.startsWith("/")?this.controller.serviceURL+d.Service:this.controller.serviceURL+"/"+d.Service,c=new a(m,{json:!0});var p=this.createParamStr(d.Fields);if(!1===p)return;void 0!==p&&(g+="Parameters"+p),u=v&&"multi"===v.toLowerCase()?new sap.ui.core.ListItem({key:"{"+n.Fieldname+"}",text:n.AddDisplayField?"{"+n.AddDisplayField+"} {"+n.Fieldname+"}":"{"+n.Fieldname+"}",additionalText:n.AddDisplayField?"{"+n.AddDisplayField+"}":""}):new sap.ui.core.ListItem({key:"{"+n.Fieldname+"}",text:"{"+(n.AddDisplayField||n.Fieldname)+"}",additionalText:n.AddDisplayField?"{"+n.AddDisplayField+"}":""}),r||o.bindItems("/",u);var F=n.AddDisplayField?n.Fieldname+","+n.AddDisplayField:n.Fieldname;c.read("/"+g,{urlParameters:{$select:F},async:!r||!0!==r,success:$.proxy(function(e){var t=e.results;if(r&&!0===r)return void(this.fpDialogData=t);if(n.SelectionControl&&"Multi"===n.SelectionControl){var a={};a[n.Fieldname]="All",a[n.AddDisplayField]="All",t.splice(0,0,a)}h.setSizeLimit(e.results.length),h.setData(t),o.setModel(h),this.setSelectedValues(o,n,d),o.setBusy(!1)},this),error:$.proxy(function(e){o.setBusy(!1)},this)});break;case"fixed":if(o.getModel())return;o.setBusy(!0);var D=this.controller.modulePath,y=new t(D+"/model/Periods.json",!1);y.attachRequestCompleted(function(){y.setData(y.getData().results),o.setModel(y),o.setBusy(!1),this.setSelectedValues(o,n,d)},this),u=new sap.ui.core.ListItem({key:"{key}",text:"{text}"}),o.bindItems("/",u)}}},setSelectedValues:function(e,l,r){var i=l.DefaultFilterVal,s=l.SelectionControl;switch(l.ValueHelpType.toLowerCase()){case"query":if(i&&i.length&&i.length>0)if("single"===s.toLowerCase()||"multi"===s.toLowerCase()){var o=[];i.forEach(function(e){var t=e.val_low;t&&o.push(t)},this),e instanceof sap.m.MultiComboBox?e.setSelectedKeys(o):e.setSelectedKey(o[0])}else"range"===s.toLowerCase()||"rangedate"===s.toLowerCase()&&i.forEach(function(t){var a=t.val_low,l=t.val_high;a&&!isNaN(Date.parse(a))&&e.setDateValue(a),l&&!isNaN(Date.parse(l))&&e.setSecondDateValue(l)},this);break;case"fixed":if("specialrange"===s.toLowerCase()){if(!i)return;var n=i[0].val_low;if(n&&n.toLowerCase()&&"custom"!==n.toLowerCase()){var d=i[0].val_low,c=i[0].val_high;d&&c&&(n="Custom")}e.setSelectedKey(n);var u,m,f,v=e.getParent().getItems()[2].getItems()[1],g=e.getParent().getItems()[2].getItems()[3],h=new t;if(h.setData(),"Custom"===n){if(v.setEnabled(!0),g.setEnabled(!0),this.controller.jumpTo){var p;sap.ui.Device.browser.msie||sap.ui.Device.browser.edge?(p=this.controller.jumpToData.find(function(e){return e.Fieldname===l.Fieldname},this))&&p.length>0&&(p=p[0]):p=this.controller.jumpToData.find(function(e){return e.Fieldname===l.Fieldname},this)}if(p)var F=p.val_low,D=p.val_high;else d&&c&&(F=d,D=c);u=r.Service.startsWith("/")?this.controller.serviceURL+r.Service:this.controller.serviceURL+"/"+r.Service,m=r.ServEntity;var y;y=new a(u,{json:!0});var S=this.createParamStr(r.Fields);if(!1===S)return;void 0!==S&&(m+="Parameters"+S),f=new sap.ui.core.ListItem({key:"{PeriodID}",text:"{PeriodShort}",additionalText:"{PeriodLong}"}),v.bindItems("/",f),v.setModel(h),g.bindItems("/",f),g.setModel(h);y.read("/"+m,{urlParameters:{$select:"PeriodID,PeriodShort,PeriodLong"},success:$.proxy(function(e){var t=e.results;h.setData(t),h.setSizeLimit(e.results.length),v.setSelectedKey(F),g.setSelectedKey(D)},this),error:$.proxy(function(e){},this)})}else{v.setEnabled(!1),g.setEnabled(!1),u=this.controller.serviceURL+"/BRS/Architect_DataModel/Query/FTM/services/CUR_PERIODS.xsodata",m="/CUR_PERIODS",y=new a(u,{json:!0});var w=new sap.ui.model.Filter({path:"Type",operator:sap.ui.model.FilterOperator.EQ,value1:n});y.read(m,{filters:[w],success:$.proxy(function(e){var t=e.results[0],a=new sap.ui.core.ListItem({key:t.FromPeriod,text:t.FromPeriodShort,additionalText:t.FromPeriodLong});v.addItem(a),v.setSelectedKey(t.FromPeriod);var l=new sap.ui.core.ListItem({key:t.ToPeriod,text:t.ToPeriodShort,additionalText:t.ToPeriodLong});g.addItem(l),g.setSelectedKey(t.ToPeriod)},this),error:$.proxy(function(e){jQuery.sap.log.error("cannot load period Data")},this)})}}}},loadSpecialFilters:function(e,t,a){var l=t.getView().getModel(a);e.setModel(l);var r=new sap.ui.core.ListItem({key:"{key}",text:"{text}"});e.bindAggregation("items",{path:"/data",template:r});var i=e.data("fltrLoadInfo"),s=e.data("variantData");this.setSelectedSpecialValues(e,i,s,t)},setSelectedSpecialValues:function(e,t,a,l){var r=t.DefaultFilterVal;if(r)if(t&&"specialAssetDateRange"===t.SelectionControl){var i=e.getParent().getItems()[2];if(e.setSelectedKey("OverdueA"),i.setEnabled(!1),i.setDateValue(new Date),r[0].val_low&&"overduea"!==r[0].val_low.toLowerCase()){var s=!(!r[0].val_low||isNaN(new Date(r[0].val_low).getTime()));!1===s?(e.setSelectedKey("Custom"),i.setEnabled(!0),i.setDateValue(null),i.setSecondDateValue(null)):!0===s&&(e.setSelectedKey("Custom"),i.setEnabled(!0),i.setDateValue(new Date(r[0].val_low)),i.setSecondDateValue(new Date(r[0].val_high)))}}else{var o=e.getParent().getItems()[2].getItems()[1],n=l.getView().getModel("woStatusCodeModel");o.setModel(n);var d=new sap.ui.core.ListItem({key:"{key}",text:"{text}"});o.bindAggregation("items",{path:"/data",template:d});var c=e.getParent().getItems()[2].getItems()[3],u=r[0].val_low,m=["INPL","PLND","SCHD","DISP","ACKN","REJT","ONST","MSAF","HOLD","INPR"];switch(o.setEnabled(!1),c.setEnabled(!1),u){case"OpenA":o.setSelectedKeys(m),c.setValue("");break;case"OverdueA":o.setSelectedKeys(m);var f=new Date;c.setDateValue(f);break;case"Duenext24":o.setSelectedKeys(m);var v=(new Date).setDate((new Date).getDate()+1);c.setDateValue(new Date(v));break;case"Custom":o.setEnabled(!0),c.setEnabled(!0),c.setValue("");break;case"None":o.setEnabled(!1),c.setEnabled(!1),c.setValue(""),o.setSelectedKeys(null)}}},onSpecialFiltersSelectionChange:function(e,t,a){var l=e.getParameter("selectedItem").getKey(),r=e.getSource(),i=r.data("fltrLoadInfo"),s=r.data("variantData");i.DefaultFilterVal=[{Filedname:i.Fieldname,filter_op:"eq",val_low:l}],"woStatus"===t?this.setSelectedSpecialValues(r,i,s,a):"assetDate"===t?this.setSelectedSpecialValues(r,i,s,a):this.setSelectedValues(r,i,s)},createParamStr:function(t){for(var a,l=t.filter(function(e){if(e.hasOwnProperty("IsParameter")&&"true"===e.IsParameter)return e},this),r=0;r<l.length;r++){var i=l[r];if(!(i.hasOwnProperty("Filter_Val")&&i.Filter_Val&&i.Filter_Val.length))return e.alert(this.controller.oBundle.getProperty("fltrErr2")),!1;if(0===i.Filter_Val.length||i.Filter_Val>=2)return e.alert(this.controller.oBundle.getProperty("fltrErr1")),!1;a?a+=i.Fieldname+"=\'"+i.Filter_Val[0].val_low+"\', ":a="("+i.Fieldname+"=\'"+i.Filter_Val[0].val_low+"\', "}return a=void 0!==a?a.replace(/,\\s*$/,"")+")/Results":void 0},createFilterPaneFilters:function(e){this.controller.onVariantSettingBtnPressed(!0);var t=[];if(null===this.controller.onVariantAction(e,!1).tempArr)return void jQuery.sap.log.error("Temp Field Array Null");var a=this.controller.getView().byId("idBRSFilterPaneForm");if(a&&a.getContent()){return a.getContent().forEach(function(e){var a,l=[],i=e.data("selectionControl");switch(i&&i.toLowerCase()){case"single":case"multi":a=e.getItems()[1],a.data("fltrLoadInfo").Fieldname,l=r.singleMultiFilters(e,i),l&&l.length&&l.length>0&&t.push(l);break;case"range":a=e.getItems()[1];a.getItems()[1].data("fltrLoadInfo").Fieldname,l=r.rangeFilters(e),l&&l.length&&l.length>0&&t.push(l);break;case"rangedate":a=e.getItems()[1],a.data("fltrLoadInfo").Fieldname,l=r.rangeDateFilters(e),l&&l.length&&l.length>0&&t.push(l);break;case"specialrange":a=e.getItems()[1],a.data("fltrLoadInfo").Fieldname,l=r.specialRangeFilters(e),l&&t.push(l);break;case"rangenumber":a=e.getItems()[1];a.getItems()[1].data("fltrLoadInfo").Fieldname,l=r.numberRangeFilters(e),l&&l.length&&l.length>0&&t.push(l)}},this),t}this.controller.getView().setBusy(!1),jQuery.sap.log.error("Error in ChartMaster. form element not found for saving")},setAdvancedFilterCount:function(e,t,a){var l=e.getView().byId(t);if(a&&a.FilterPanel){var r=a.Fields.filter(function(e){if(e.Filter_Val&&e.Filter_Val.length&&e.Filter_Val.length>0)return e},this);if(a.FilterPanel){var i,s=a.FilterPanel.Fields,o=this.calculateAdvancedFilterCount(r,s);i=o>9?"9+":o+"",l.getItems()[1].setText(i),l.attachBrowserEvent("click",function(t){e.onVariantSettingBtnPressed()},e)}}},calculateAdvancedFilterCount:function(e,t){var a=0;return t.forEach(function(t){e.forEach(function(e){t.Fieldname===e.Fieldname&&a++},this)},this),e.length-a}}});',"brs_demo_tablemaster/FilterPane/FilterUtils.js":'sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/model/odata/ODataModel"],function(e,t,a){return{singleMultiFilters:function(e,t){var a=e.getItems()[1],n=[];if(a&&(a instanceof sap.m.ComboBox||a instanceof sap.m.MultiComboBox||a instanceof sap.m.MultiInput)){var l=a.data("fltrLoadInfo").Fieldname,o=[];if(a instanceof sap.m.MultiInput){a.getTokens().forEach(function(e){o.push(e.getKey())},this)}else"Multi"===t?o=a.getSelectedKeys():"Single"===t&&a.getSelectedKey()&&(o=[a.getSelectedKey()]);if(o.length>0)for(var s=0;s<o.length;s++){var i=o[s];i.indexOf("\'")>-1&&(i=i.replace(/\'/g,"\'\'")),"All"!==i&&n.push({Fieldname:l,filter_op:"eq",val_low:i,val_high:null})}}return n},rangeFilters:function(e){var t=e.getItems()[1],a=[];if(t&&t instanceof sap.m.VBox){var n=t.getItems(),l=n[1],o=n[3],s=l.data("fltrLoadInfo").Fieldname,i=l.getSelectedKey(),r=o.getSelectedKey();i&&r&&a.push({Fieldname:s,filter_op:"bt",val_low:i,val_high:r})}return a},numberRangeFilters:function(e){var t=e.getItems()[1],a=[];if(t&&t instanceof sap.m.VBox){var n=t.getItems(),l=n[1],o=n[3],s=l.data("fltrLoadInfo").Fieldname,i=l&&l.getValue()&&!isNaN(parseFloat(l.getValue()))?l.getValue():void 0,r=o&&o.getValue()&&!isNaN(parseFloat(o.getValue(),10))?o.getValue():void 0;i&&r?a.push({Fieldname:s,filter_op:"bt",val_low:i,val_high:r}):i?a.push({Fieldname:s,filter_op:"ge",val_low:i}):r&&a.push({Fieldname:s,filter_op:"le",val_low:r})}return a},rangeDateFilters:function(e){var t,a,n=e.getItems()[1],l=[],o=n.data("fltrLoadInfo").Fieldname;if(n&&n instanceof sap.m.DateRangeSelection&&(t=n.getDateValue()?n.getDateValue():null,a=n.getSecondDateValue()?n.getSecondDateValue():null,t&&a)){var s=parseInt(t.getMonth(),10)+1<10?"0"+(parseInt(t.getMonth(),10)+1):parseInt(t.getMonth(),10)+1,i=parseInt(a.getMonth(),10)+1<10?"0"+(parseInt(a.getMonth(),10)+1):parseInt(a.getMonth(),10)+1;l.push({Fieldname:o,filter_op:"bt",val_low:t.getFullYear()+"-"+s+"-"+t.getDate(),val_high:a.getFullYear()+"-"+i+"-"+a.getDate()})}return l},specialRangeFilters:function(e){var t,a,n=e.getItems()[1],l=[];if(n instanceof sap.m.ComboBox||n instanceof sap.m.MultiComboBox){var o=n.getParent().getItems()[2],s=n.data("fltrLoadInfo").Fieldname;o.getItems().forEach(function(e){if(e instanceof sap.m.ComboBox){"from"===e.data("splFieldKey")?t=e.getSelectedKey():a=e.getSelectedKey()}},this),t&&a?l.push({Fieldname:s,filter_op:"bt",val_low:t,val_high:a}):t?l.push({Fieldname:s,filter_op:"eq",val_low:t}):a&&l.push({Fieldname:s,filter_op:"eq",val_low:t})}return l},specialWOStatusFilters:function(e){var t=e.getItems()[1],a=[];if(t instanceof sap.m.ComboBox||t instanceof sap.m.MultiComboBox){var n=t.getParent().getItems()[2],l=n.getItems()[1],o=n.getItems()[3];if(l instanceof sap.m.MultiComboBox&&l.getSelectedKeys().forEach(function(e){a.push({Fieldname:"WorkOrderStatus",filter_op:"eq",val_low:e})},this),o instanceof sap.m.DateRangeSelection){var s,i,r=o.getDateValue(),g=o.getSecondDateValue();r&&g?(s=parseInt(r.getMonth(),10)+1<10?"0"+(parseInt(r.getMonth(),10)+1):parseInt(r.getMonth(),10)+1,i=parseInt(g.getMonth(),10)+1<10?"0"+(parseInt(g.getMonth(),10)+1):parseInt(g.getMonth(),10)+1,a.push({Fieldname:"CustomerSLA2DueDate",filter_op:"bt",val_low:r.getFullYear()+"-"+s+"-"+r.getDate(),val_high:g.getFullYear()+"-"+i+"-"+g.getDate()})):r&&(s=parseInt(r.getMonth(),10)+1<10?"0"+(parseInt(r.getMonth(),10)+1):parseInt(r.getMonth(),10)+1,a.push({Fieldname:"CustomerSLA2DueDate",filter_op:"le",val_low:r.getFullYear()+"-"+s+"-"+r.getDate()}))}}return a},specialAssetDateFilters:function(e){var t=e.getItems()[1],a=[];if(t instanceof sap.m.ComboBox||t instanceof sap.m.MultiComboBox){var n=t.data("fltrLoadInfo").Fieldname,l=e.getItems()[2];if(l&&l instanceof sap.m.DateRangeSelection){var o,s,i=l.getDateValue(),r=l.getSecondDateValue();i&&r&&i<r?(o=parseInt(i.getMonth(),10)+1<10?"0"+(parseInt(i.getMonth(),10)+1):parseInt(i.getMonth(),10)+1,s=parseInt(r.getMonth(),10)+1<10?"0"+(parseInt(r.getMonth(),10)+1):parseInt(r.getMonth(),10)+1,a.push({Fieldname:n,filter_op:"bt",val_low:i.getFullYear()+"-"+o+"-"+i.getDate(),val_high:r.getFullYear()+"-"+s+"-"+r.getDate()})):(i||i&&r&&i===r)&&(o=parseInt(i.getMonth(),10)+1<10?"0"+(parseInt(i.getMonth(),10)+1):parseInt(i.getMonth(),10)+1,a.push({Fieldname:n,filter_op:"le",val_low:i.getFullYear()+"-"+o+"-"+i.getDate()}))}}return a}}});',"brs_demo_tablemaster/model/models.js":'sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);return i.setDefaultBindingMode("OneWay"),i}}});',"brs_demo_tablemaster/utilities/Controls.js":'sap.ui.define(["sap/m/Button","sap/m/SegmentedButton","sap/m/Text"],function(t,e,n){return{button:function(t,e,n){return new sap.m.Button({width:"100%",text:t.FieldDescription,customData:[new sap.ui.core.CustomData({key:"actionBtn",value:t}),new sap.ui.core.CustomData({key:"variantData",value:e})],press:n.onActionBtnPress.bind(n)})},download:function(t,e,n){return new sap.m.Button({width:"100%",icon:"sap-icon://pdf-attachment",customData:[new sap.ui.core.CustomData({key:"actionBtn",value:t}),new sap.ui.core.CustomData({key:"variantData",value:e})],press:n.onActionBtnPress.bind(n)})},approvereject:function(t,n,o){var a=[];a.push(new sap.m.SegmentedButtonItem({icon:"sap-icon://status-in-process",tooltip:o.oBundle.getProperty("inprocess"),key:"INPROGRESS"})),a.push(new sap.m.SegmentedButtonItem({icon:"sap-icon://accept",type:sap.m.ButtonType.Accept,tooltip:o.oBundle.getProperty("approve"),key:"APPROVED"})),a.push(new sap.m.SegmentedButtonItem({icon:"sap-icon://decline",type:sap.m.ButtonType.Reject,tooltip:o.oBundle.getProperty("reject"),key:"REJECTED"}));var p=new e({width:"100%",items:a});return p.bindProperty("selectedKey",{path:t.Fieldname}),p}}});',"brs_demo_tablemaster/utilities/Utilities.js":'sap.ui.define(["sap/m/MessageBox","sap/ui/model/odata/ODataModel","brs_demo_tablemaster/FilterPane/FilterUtils"],function(e,t,a){return{initUtilities:function(e){this.oController=e},checkSpecialRangeFilter:function(e){var t=!1,a=e.FilterPanel;return a&&a.Fields&&a.Fields.length&&a.Fields.length>0&&a.Fields.filter(function(e){e.SelectionControl&&"specialrange"===e.SelectionControl.toLowerCase()&&e.DefaultFilterVal&&e.DefaultFilterVal.length&&e.DefaultFilterVal.length>0&&(t=!0)},this),t},mergeJTFPVarfilters:function(e){var t,a=[],r=e.Fields,i=e.FilterPanel.Fields;if(i.forEach(function(e){a.push(e.Fieldname)},this),this.oController.jumpTo&&(t=this.oController.jumpToData),r.forEach(function(r,n){var l;if(t)var o=t.filter(function(e){return e.Fieldname===r.Fieldname},this);if(o&&o.length&&o.length>0)l=[],o.forEach(function(t){t.hasOwnProperty("val_low")&&"all"!==t.val_low.toLowerCase()&&(l.push(t),e.Fields[n].Filter_Val=l)},this);else if((!r.Filter_Val||r.Filter_Val instanceof Array&&r.Filter_Val.length<=0)&&a.indexOf(r.Fieldname)>-1){var s=a.indexOf(r.Fieldname),c=i[s].SelectionControl;if(c&&"specialrange"===c.toLowerCase()){var u=i[s].DefaultFilterVal;u&&"Custom"!==u[0].val_low&&this.getPeriods(u[0].val_low,$.proxy(function(t){var a=t.results[0];l=a.ToPeriod?[{Fieldname:r.Fieldname,filter_op:"bt",val_low:a.FromPeriod,val_high:a.ToPeriod}]:[{Fieldname:r.Fieldname,filter_op:"eq",val_low:a.FromPeriod}],e.Fields[n].Filter_Val=l},this),$.proxy(function(e){jQuery.sap.log.error("cannot Fetch Periods")},this))}}else if("periodid"===r.Fieldname.toLowerCase()&&e&&e.AppVariantType&&("sptable_lcomm_month"===e.AppVariantType.toLowerCase()||"sptable_lcomm_year"===e.AppVariantType.toLowerCase())){var p,d=this.oController.serviceURL+"/BRS/Architect_DataModel/Query/FTM/services/CUR_PERIODS.xsodata/CUR_PERIODS?$format=json&$filter=Type eq \'CurrentCalMonth\'";$.ajax({url:d,type:"GET",async:!1,context:this,contentType:"application/json",Accept:"application/json",success:function(t){var a=t.d.results[0].FromPeriod,i=a?a.substr(0,4):null,l=a?a.substr(4,a.length-1):null;p=i&&"sptable_lcomm_month"===e.AppVariantType?parseInt(i,10)+2+""+l:i&&"sptable_lcomm_year"===e.AppVariantType?parseInt(i,10)+5+""+l:a,e.Fields[n].Filter_Val=[{Fieldname:r.Fieldname,filter_op:"bt",val_low:a,val_high:p}]},error:function(){jQuery.sap.log.error("!!!!!!!!!!!!!!!!!!Lease Commitment report period will fail. No Period value!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!")}})}},this),a.indexOf("WorkOrderStatus")>-1){var n=r.filter(function(e){return"WorkOrderStatus"===e.Fieldname},this),l=r.filter(function(e){return"WorkOrderDueDate"===e.Fieldname},this),o=a.indexOf("WorkOrderStatus"),s=i[o].DefaultFilterVal,c=["INPL","PLND","SCHD","DISP","ACKN","REJT","ONST","MSAF","HOLD","INPR"],u=[];switch(s){case"OpenA":n&&c.forEach(function(e){u.push({Fieldname:n.Fieldname,operator:"eq",val_low:e})},this);break;case"OverdueA":n&&c.forEach(function(e){u.push({Fieldname:n.Fieldname,operator:"eq",val_low:e})},this),l&&[{Fieldname:l.Fieldname,operator:"le",val_low:new Date}];break;case"Duenext24":n&&c.forEach(function(e){u.push({Fieldname:n.Fieldname,operator:"eq",val_low:e})},this),l&&[{Fieldname:l.Fieldname,operator:"le",val_low:new Date((new Date).setDate((new Date).getDate()+1))}]}}e.UsrVariantID="$DEFAULT",e.Username="",e.IsSuper&&delete e.IsSuper,e.UsrVariantDescription=e.Description,e.Description.startsWith("$")||(e.UsrVariantDescription="$DEFAULT "+e.Description),this.oController.saveVariantConfig(e,!1)},getPeriods:function(e,a,r){var i=this.oController.serviceURL+"/BRS/Architect_DataModel/Query/FTM/services/CUR_PERIODS.xsodata";new t(i,{json:!0}).read("/CUR_PERIODS",{async:!1,filters:[new sap.ui.model.Filter({path:"Type",operator:"EQ",value1:e})],success:a,error:r})},saveJumptoInfo:function(e,a,r,i,n){var l=e.serviceURL+"/BRS/HAA/services/SessionParameters.xsodata",o=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(4).substring(1)}return e()+e()}(),s=this.getFilterPaneData(e);i&&i.length&&i.length>0&&(s=s.concat(i)),n&&(s=s.filter(function(e){return-1===n.indexOf(e.Fieldname)},this)),new t(l,{json:!0}).create("/SessionParameters",{Paramname:"jumpTo",Value:JSON.stringify({key:o,value:s})},{async:!1,success:a(o),error:r})},getFilterPaneData:function(e,t){var r=e.getView().byId("idBRSFilterPaneForm");if(r&&r.getContent()){var i=r.getContent(),n=[],l=[];return i.forEach(function(e){var t=[],r=e.data("selectionControl");switch(r&&r.toLowerCase()){case"single":case"multi":t=a.singleMultiFilters(e,r),t.length>0&&(n=n.concat(t),l.push({filter:t,dataType:r.toLowerCase()}));break;case"range":t=a.rangeFilters(e),t.length>0&&(n=n.concat(t),l.push({filter:t,dataType:r.toLowerCase()}));break;case"rangenumber":t=a.numberRangeFilters(e),t.length>0&&(n=n.concat(t),l.push({filter:t,dataType:r.toLowerCase()}));break;case"rangedate":t=a.rangeDateFilters(e),t.length>0&&(n=n.concat(t),l.push({filter:t,dataType:r.toLowerCase()}));break;case"specialrange":t=a.specialRangeFilters(e),t.length>0&&(n=n.concat(t),l.push({filter:t,dataType:r.toLowerCase()}));break;case"specialwostatus":t=a.specialWOStatusFilters(e),t.length>0&&(n=n.concat(t),l.push({filter:t,dataType:r.toLowerCase()}));break;case"specialassetdaterange":t=a.specialAssetDateFilters(e),t.length>0&&(n=n.concat(t),l.push({filter:t,dataType:r.toLowerCase()}))}},this),t&&!0===t?l:n}},_prepareFilters:function(e,t){var a,r=[];return e.forEach(function(e){var t=e.filter,a=[];t.forEach(function(e){e&&e.val_high?a.push(new sap.ui.model.Filter({path:e.Fieldname,operator:e.filter_op.toUpperCase(),value1:e.val_low,value2:e.val_high})):a.push(new sap.ui.model.Filter({path:e.Fieldname,operator:e.filter_op.toUpperCase(),value1:e.val_low}))},this),a&&a.length>0&&r.push(new sap.ui.model.Filter({filters:a,and:!1}))},this),r&&r.length>0&&(a=new sap.ui.model.Filter({filters:r,and:!0})),a},_prepareFiltersAsString:function(e,t){var a,r="";e.forEach(function(e){var t="",a=e.dataType;e.filter.forEach(function(e){e&&e.val_high?t+="date"===a||"datetime"===a||"time"===a||"rangedate"===a?e.Fieldname+" ge datetime\'"+e.val_low+"T00:00:00\' and "+e.Fieldname+" le datetime\'"+e.val_high+"T00:00:00\' or ":e.Fieldname+" ge "+e.val_low+" and "+e.Fieldname+" le \'"+e.val_high+"\' or ":(new Date(e.val_low),t+="date"===a||"datetime"===a||"time"===a?e.Fieldname+" "+e.filter_op.toLowerCase()+" datetime\'"+e.val_low+"T00:00:00\' or ":e.Fieldname+" "+e.filter_op.toLowerCase()+" \'"+e.val_low+"\' or ")},this);var i=t.lastIndexOf(" or ");t&&t.length&&t.length>0&&i>-1&&(t="("+t.substring(0,i)+")"),r+=t+" and "},this);var i=r.lastIndexOf(" and ");return r&&r.length>0&&i>-1&&(a="("+r.substring(0,i)+")"),a},addCustomStyleClass:function(e,t){e.addStyleClass(t)},sortVariantList:function(e){e.sort(function(e,t){var a=e.AppVariantID,r=t.AppVariantID;return"User"===e.Type&&(a=e.UsrVariantID),"User"===t.Type&&(r=t.UsrVariantID),"$DEFAULT"===e.UsrVariantID?1:"$DEFAULT"===t.UsrVariantID?-1:a<r?-1:a>r?1:0})},spTableFormatter:function(e,t){var a;return String(e).indexOf(t)>-1&&(a={colorCode:e.split(t)[0],value:e.split(t)[1],value2:""},e.split(t)[2]&&(a.value2=e.split(t)[2])),a},getIdforDescription:function(a,r,i,n,l){var o,s,c,u=i.ServEntity;if(i&&i.Fields&&i.Fields.length&&(s=i.Fields.filter(function(e){return e.Fieldname===n},this)),s&&s.length&&s.length>0&&s[0].IdMappingParam&&(c=s[0].IdMappingParam),c){for(var p=i.Fields.filter(function(e){if(e.hasOwnProperty("IsParameter")&&"true"===e.IsParameter)return e},this),d=0;d<p.length;d++){var f=p[d];if(!f.Filter_Val||!f.Filter_Val.length)return sap.ui.core.BusyIndicator.hide(),void e.alert(this.controller.oBundle.getProperty("fltrErr2"));if(0===f.Filter_Val.length||f.Filter_Val>=2)return sap.ui.core.BusyIndicator.hide(),void e.alert(this.controller.oBundle.getProperty("navNotPossible"));o?o+=f.Fieldname+"=\'"+f.Filter_Val[0].val_low+"\', ":o="("+f.Fieldname+"=\'"+f.Filter_Val[0].val_low+"\', "}o=void 0!==o?o.replace(/,\\s*$/,"")+")":void 0;var m=i.Service.startsWith("/")?r.serviceURL+i.Service:r.serviceURL+"/"+i.Service,h=new t(m,{json:!0});o&&(u=u+"Parameters"+o+"/Results");var F=new sap.ui.model.Filter(n,sap.ui.model.FilterOperator.EQ,l);h.read("/"+u,{async:!1,urlParameters:{$select:c},filters:[F],success:function(e){a(e,c)},error:function(e){a(!1)}})}else a("noMappedId")},formatValue:function(e,t,a,r){var i,n=e;if(!t||!e)return n;switch(t&&t.toLowerCase()){case"curr":i=sap.ui.core.format.NumberFormat.getCurrencyInstance({style:a?a.toLowerCase():"standard",minFractionDigits:2,maxFractionDigits:r&&!isNaN(parseInt(r,10))?parseInt(r,10):2}),n=e&&!isNaN(parseFloat(e))?i.format(e,"$"):null;break;case"percent":i=sap.ui.core.format.NumberFormat.getPercentInstance({style:a?a.toLowerCase():"standard",minFractionDigits:0,maxFractionDigits:r&&!isNaN(parseInt(r,10))?parseInt(r,10):2}),n=e&&!isNaN(parseFloat(e))?i.format(e/100):null;break;case"int":i=sap.ui.core.format.NumberFormat.getIntegerInstance({style:a?a.toLowerCase():"standard"}),n=e&&!isNaN(parseFloat(e))?i.format(e):null;break;case"dec":i=sap.ui.core.format.NumberFormat.getFloatInstance({style:a?a.toLowerCase():"standard",minFractionDigits:r&&!isNaN(parseInt(r,10))?parseInt(r,10):0,maxFractionDigits:r&&!isNaN(parseInt(r,10))?parseInt(r,10):2}),n=e&&!isNaN(i.parse(e))?i.format(e):null;break;case"date":if(e)var l=new Date(e);var o=!1;sap.ui.Device.browser.msie?l&&l.getTime()&&l.getTime()<0&&(o=!0):Math.sign(l)<0&&(o=!0),o?n=null:(i=sap.ui.core.format.DateFormat.getDateInstance({strictParsing:!0,pattern:"dd/MM/yyyy"}),n=l?i.format(l):null);break;case"time":if(e){var s;e.__edmType&&(e=e.ms);var c=new Date;e=new Date(e),s=new Date(c.getUTCFullYear(),c.getMonth(),c.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()),s=new Date(s.getTime())}i=sap.ui.core.format.DateFormat.getTimeInstance({strictParsing:!0}),n=s?i.format(s):null;break;case"datetime":if(e)var u=new Date(e);i=sap.ui.core.format.DateFormat.getDateTimeInstance({strictParsing:!0}),n=u?i.format(u):null}return n},checkNavigationIntent:function(e,t,a,r){if(!sap.ushell&&!e&&!t)return!1;var i="#"+e+"-"+t;sap.ushell.Container.getService("CrossApplicationNavigation").isIntentSupported([i],a.getOwnerComponent()).done($.proxy(function(e){r(!(!e||!e[i]||!0!==e[i].supported))},this))},moveArray:function(e,t,a){for(;t<0;)t+=e.length;for(;a<0;)a+=e.length;if(a>=e.length)for(var r=a-e.length;1+r--;)e.push(void 0);e.splice(a,0,e.splice(t,1)[0])},getSortByValFunc:function(e){return function(t,a){return t[e]>a[e]?1:t[e]<a[e]?-1:0}}}});',"brs_demo_tablemaster/fragments/CreateInteraction.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form"\n\txmlns:customData="http://schemas.sapP.com/sapui5/extension/sap.ui.core.CustomData/1"><VBox class="sapUiTinyMargin"><TextArea width="100%" valueLiveUpdate="true"/><VBox id="idDOAL" width="100%" visible="false"><HBox width="100%" alignItems="Center"><Label text="{i18n>assignTo}: "/><Select id="idDOA" autoAdjustWidth="true" items="{}"><core:Item key="{UserID}" text="{UserID}"/></Select></HBox></VBox><ComboBox width="100%" items="{}" placeholder="{i18n>selectRiskRating}" visible="false"><core:Item key="{RiskRatingID}" text="{RiskRatingDescription}"/></ComboBox></VBox></core:FragmentDefinition>',"brs_demo_tablemaster/fragments/DetailPopup.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form"\n\txmlns:customData="http://schemas.sapP.com/sapui5/extension/sap.ui.core.CustomData/1"><Popover placement="Auto" showHeader="false" bounce="true" verticalScrolling="true" horizontalScrolling="true"></Popover></core:FragmentDefinition>',"brs_demo_tablemaster/fragments/ExportOptions.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"\n\txmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><ActionSheet title="{i18n>exportHdr}" showCancelButton="true" placement="Bottom"><buttons><Button text="{i18n>exportOpt1}" icon="sap-icon://document-text" customData:csvparam="CSVOutput" press="onExportSelection"/><Button text="{i18n>exportopt2}" icon="sap-icon://comment" customData:csvparam="CSVOutputWithComments" press="onExportSelection"/></buttons></ActionSheet></core:FragmentDefinition>',"brs_demo_tablemaster/fragments/FilterPane.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form"\n\txmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><f:SimpleForm id="idBRSFilterPaneForm" maxContainerCols="1" editable="true" layout="ResponsiveGridLayout" class="brsFilterPaneForm"\n\t\tcontent="{ path: \'filterPaneDataModel>/\', factory: \'.filterPaneCreateUI\' }"></f:SimpleForm></core:FragmentDefinition>',
"brs_demo_tablemaster/fragments/JumpToDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form"\n\txmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><Dialog icon="sap-icon://forward" title="{i18n>jumpTo}"><content><List inset="false" mode="SingleSelectMaster" includeItemInSelection="true" growing="true" growingScrollToLoad="true" items="{}"\n\t\t\t\tselectionChange="jumpToTarget" class="jumpToList"><StandardListItem title="{ToVarDescription}" type="Active" customData:jumpTblData="{}" adaptTitleSize="false"/></List></content><buttons><Button icon="sap-icon://sys-cancel" text="{i18n>close}" press="closeJumpToDialog"/></buttons></Dialog></core:FragmentDefinition>',"brs_demo_tablemaster/fragments/LongText.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form"\n\txmlns:customData="http://schemas.sapP.com/sapui5/extension/sap.ui.core.CustomData/1"><VBox width="100%"><Label width="auto" text="{TextSubType}" class="sapUiTinyMargin"/><Text width="auto" text="{LONGTEXT}" class="sapUiTinyMargin"/></VBox></core:FragmentDefinition>',"brs_demo_tablemaster/fragments/UserVariantManagement.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:f="sap.ui.layout.form"\n\txmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><Dialog icon="sap-icon://user-edit" title="{i18n>manageVariants}" class="sapUiResponsiveContentPadding"><subHeader><Toolbar><content><Button id="idVariantManageSelectAll" text="{i18n>selectAll}" icon="sap-icon://multiselect-all" press="onManageVariants"\n\t\t\t\t\t\tcustomData:action="selectAll"/><Button id="idVariantManageDeSelectAll" text="{i18n>deselectAll}" icon="sap-icon://multiselect-none" press="onManageVariants"\n\t\t\t\t\t\tcustomData:action="deselectAll" visible="false"/></content></Toolbar></subHeader><content><List id="idVariantManageTable" mode="MultiSelect" growing="true" growingScrollToLoad="true" items="{uvModel>/}"><items><StandardListItem title="{uvModel>Description}" description="{uvModel>UsrVariantID}" customData:variantData="{uvModel>}"/></items></List></content><buttons><Button id="idVariantManageDeleteBtn" text="{i18n>delete}" icon="sap-icon://delete" press="onManageVariants" customData:action="delete"/><Button text="{i18n>close}" icon="sap-icon://cancel" press="onManageVariants" customData:action="close"/></buttons></Dialog></core:FragmentDefinition>',"brs_demo_tablemaster/fragments/VariantDialog.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core" xmlns:app="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"\n\txmlns:customCtrl="brs_demo_tablemaster.fragments"><P13nDialog ok="handleOK" cancel="handleCancel" showReset="true" reset="handleReset" initialVisiblePanelType="columns"\n\t\tstretch="{= ${device>/system/desktop} === true ? false : true}"><panels><P13nColumnsPanel title="Available Fields" visible="true"\n\t\t\t\titems="{path: \'tableVariantAFModel>/Fields\', sorter:{path: \'DisplayOrder\', descending: false}}"\n\t\t\t\tcolumnsItems="{path: \'tableVariantAFModel>/Fields\'}" changeColumnsItems="reorderColumnsItem"><P13nItem columnKey="{path: \'tableVariantAFModel>Fieldname\'}" text="{tableVariantAFModel>FieldDescription}"/><columnsItems><P13nColumnsItem columnKey="{path: \'tableVariantAFModel>Fieldname\'}"\n\t\t\t\t\t\tvisible="{path:\'tableVariantAFModel>Visible\' , formatter:\'.booleanFormatter\'}" index="{tableVariantAFModel>DisplayOrder}"\n\t\t\t\t\t\tapp:IsParameter="{tableVariantAFModel>IsParameter}" total="false"/></columnsItems></P13nColumnsPanel><P13nSortPanel title="Sort" visible="false" type="sort" containerQuery="true" items="{tableVariantAFModel>/Fields}"\n\t\t\t\tsortItems="{path:\'tableVariantAFModel>/Fields\', sorter:{path:\'Sort_Order\'}, filters:[{path: \'Sort_Op\', operator: \'NE\', value1:null}]}"\n\t\t\t\taddSortItem="changeVariantItem" updateSortItem="changeVariantItem" removeSortItem="changeVariantItem"><P13nItem columnKey="{tableVariantAFModel>Fieldname}" text="{tableVariantAFModel>FieldDescription}"\n\t\t\t\t\tvisible="{ path: \'tableVariantAFModel>Sortable\', formatter:\'.booleanFormatter\'}"/><sortItems><P13nSortItem columnKey="{tableVariantAFModel>Fieldname}" operation="{path: \'tableVariantAFModel>Sort_Op\'}"/></sortItems></P13nSortPanel><P13nFilterPanel title="Filter" visible="true" type="filter" containerQuery="true" maxExcludes="0" items="{tableVariantAFModel>/Fields}"\n\t\t\t\tfilterItems="{tableVarFilterModel>/}" addFilterItem="changeVariantItem" updateFilterItem="changeVariantItem"\n\t\t\t\tremoveFilterItem="changeVariantItem"><P13nItem columnKey="{tableVariantAFModel>Fieldname}" text="{tableVariantAFModel>FieldDescription}"/><filterItems><P13nFilterItem columnKey="{tableVarFilterModel>Fieldname}" operation="{tableVarFilterModel>filter_op}"\n\t\t\t\t\t\tvalue1="{tableVarFilterModel>val_low}" value2="{tableVarFilterModel>val_high}"/></filterItems></P13nFilterPanel><P13nGroupPanel title="Groups" maxGroups="10" visible="true" containerQuery="true" items="{tableVariantAFModel>/Fields}"\n\t\t\t\tgroupItems="{path: \'tableVariantAFModel>/Fields\', filters:[{path: \'SubTotal\', operator: \'NE\', value1: null}]}"\n\t\t\t\taddGroupItem="changeVariantItem" updateGroupItem="changeVariantItem" removeGroupItem="changeVariantItem"\n\t\t\t\tclass="tableMasterCustomTabGroupVariant"><P13nItem columnKey="{tableVariantAFModel>Fieldname}" text="{tableVariantAFModel>FieldDescription}"/><groupItems><P13nGroupItem columnKey="{tableVariantAFModel>Fieldname}"/></groupItems></P13nGroupPanel></panels></P13nDialog></core:FragmentDefinition>',"brs_demo_tablemaster/fragments/VariantSaveConfirmation.fragment.xml":'<core:FragmentDefinition xmlns="sap.m" xmlns:core="sap.ui.core"\n\txmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1"><Dialog icon="sap-icon://save" title="{i18n>varSave}" draggable="true" resizable="true" class="sapUiContentPadding"><content><Label text="{i18n>varID}"/><Input id="idBRSTableMasterVariantSaveID" width="100%" liveChange="checkDuplicateVariant"/><Label text="{i18n>varDesc}"/><Input id="idBRSTableMasterVariantSaveDesc" width="100%"/><CheckBox id="idBRSTableMasterVariantSaveSuperChk" text="{i18n>shararableToAllUsers}" class="brsVarSaveMCbBg"/></content><buttons><Button text="{i18n>apply}" press="onVariantAction" customData:data="apply"/><Button text="{i18n>save}" press="onVariantAction" customData:data="save"/><Button text="{i18n>cancel}" press="onVariantAction" customData:data="cancel"/></buttons></Dialog></core:FragmentDefinition>',"brs_demo_tablemaster/view/TableMaster.view.xml":'<mvc:View controllerName="brs_demo_tablemaster.controller.TableMaster" xmlns:html="http://www.w3.org/1999/xhtml" xmlns:mvc="sap.ui.core.mvc"\n\txmlns="sap.m" xmlns:core="sap.ui.core" xmlns:layout="sap.ui.layout"\n\txmlns:customData="http://schemas.sap.com/sapui5/extension/sap.ui.core.CustomData/1" displayBlock="true"><App id="idTableMaster"><pages><Page title="" showHeader="false" enableScrolling="false" class="brsChartMasterPageContainer"><layout:DynamicSideContent id="idBRSTableMasterMainContainer" sideContentPosition="Begin" sideContentFallDown="BelowM" containerQuery="true"\n\t\t\t\t\tclass="brsTableMasterMainViewContent brsFilterPaneSideContent brsFilterPaneSideContentShow"><layout:sideContent><HBox width="100%" height="100%" class="brsFilterPaneContainer" fitContainer="true" alignItems="Stretch"><items><IconTabBar id="idBRSFilterPaneTb" expanded="true" upperCase="true" class="sapUiContentPadding brsFilterPaneTab" stretchContentHeight="true"\n\t\t\t\t\t\t\t\t\tbackgroundDesign="Transparent" applyContentPadding="false"><items><IconTabFilter text="{i18n>filters}"><Page showHeader="false"><content><HBox id="idBRSFilterPaneAdvL" width="100%" justifyContent="SpaceBetween" alignItems="Center"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclass="brsAnimation4ms brsCursorPointer brsFilterPaneAdvFilL" visible="false"><items><Label width="100%" text="{i18n>advancedFilters}" textAlign="Left" class="brsFilterPanelAdvLbl"/><Label text="{i18n>0}" class="brsFilterPaneAdvCnt" textAlign="Center"/></items></HBox><core:Fragment fragmentName="brs_demo_tablemaster.fragments.FilterPane" type="XML"/></content><footer><Bar><contentMiddle><Button width="100%" text="{i18n>apply}" press="applyFilterPane" customData:data="apply"/></contentMiddle></Bar></footer></Page></IconTabFilter><IconTabFilter text=""></IconTabFilter></items></IconTabBar><VBox id="idBRSFilterToggleL" width="30px" justifyContent="Center" class="brsFilterPaneToggleL"><core:Icon tooltip="{i18n>filterPaneTooltip}" src="sap-icon://slim-arrow-left" size="1.5rem" width="100%" color="#2F1A57"\n\t\t\t\t\t\t\t\t\t\tclass="brsFilterPaneIcon brsAnimation4ms"/></VBox></items></HBox></layout:sideContent><layout:mainContent><MessageStrip id="idInitialLoadMessageStrip" showIcon="true" text="{i18n>initialloadmessage}" type="Information" visible="false" class="sapUiTinyMarginBeginEnd sapUiLargeMarginTop"/><Toolbar id="idBRSTableMasterToolbar" width="100%" height="48px" class="sapUiForceWidthAuto sapUiTinyMarginBeginEnd sapUiContentPadding"><content><Label id="idAppHeader" design="Bold" text=""/><Select id="idBRSTableMasterVarintGrpSelect" autoAdjustWidth="true" visible="false"\n\t\t\t\t\t\t\t\t\titems="{path: \'variantGroupModel>/d/results\', filters:[{path: \'AppType\', operator: \'EQ\', value1: \'REPORT\'}]}" change="onVariantGroupChanged"\n\t\t\t\t\t\t\t\t\tmaxWidth="350px"><core:Item key="{variantGroupModel>AppID}" text="{variantGroupModel>AppDescription}"/></Select><Select id="idBRSTableMasterVariantSelectB" autoAdjustWidth="true"\n\t\t\t\t\t\t\t\t\titems="{path: \'variantModel>/\', filters:[{path: \'DisplayType\', operator: \'EQ\', value1:\'table\'}]}" change="onVariantChanged" maxWidth="800px" visible="false"><items><core:Item key="{path: \'variantModel>\', formatter: \'.variantIDFormatter\'}" text="{variantModel>Description}"\n\t\t\t\t\t\t\t\t\t\t\tcustomData:variantData="{variantModel>}"></core:Item></items></Select><ToolbarSpacer/><Button id="idSaveData" icon="sap-icon://save" tooltip="{i18n>save}" type="Transparent" press="onSaveTableData" visible="false"/><Button icon="sap-icon://action" tooltip="{i18n>exportExcel}" type="Transparent" press="onExportBtnPressed"/><Button icon="sap-icon://user-edit" tooltip="{i18n>manageVariants}" customData:buttonAction="editVariants" press="onManageVariants"\n\t\t\t\t\t\t\t\t\ttype="Transparent" visible="false"/><Button id="idBRSTableVariantSettingsBtn" icon="sap-icon://action-settings" tooltip="{i18n>settings}" press="onVariantSettingBtnPressed"\n\t\t\t\t\t\t\t\t\ttype="Transparent" visible="false"/></content></Toolbar><ScrollContainer id="idBRSTableMasterScrollContainer" vertical="false" horizontal="true" visible="true"\n\t\t\t\t\t\t\tclass="sapUiTinyMarginBeginEnd brsTableMasterScrollContainer"><content><VBox id="idInitialLoadVB" alignItems="Center" justifyContent="Center" visible="false" class="sapUiContentPadding initialDataLoadVB"><items><Text text="{i18n>initalLoadMessage}"/></items></VBox><Table id="idBRSTableMasterVariantReponsiveDataTableHeader" busyIndicatorDelay="0" showNoData="false"/><ScrollContainer id="idBRSTableMasterScrollContainertBody" vertical="true" horizontal="false" class="childSContainer"><Table id="idBRSTableMasterVariantReponsiveDataTable" busyIndicatorDelay="0" enableBusyIndicator="true" width="100%" inset="false"\n\t\t\t\t\t\t\t\t\t\tmode="SingleSelectMaster" includeItemInSelection="true" growing="true" growingThreshold="20" growingScrollToLoad="false"\n\t\t\t\t\t\t\t\t\t\tselectionChange="onTableItemPress" noDataText="{i18n>loadingIndicator}"/></ScrollContainer></content></ScrollContainer><VBox id="idBRSTableMasterDetailContainer" width="auto" height="0px" visible="false" class="sapUiTinyMarginBeginEnd brsTableMasterDCVB"><items><Toolbar class="toolbar" width="100%"><Label text="{i18n>detailView}" id="idDetailLabel" class="detailDescLabel"/><ToolbarSpacer/><Button icon="sap-icon://forward" tooltip="{i18n>jumpTo}" type="Transparent" press="loadJumpToInfo" customData:fromDetail="true"/><Button id="idDetailFullScreen" icon="sap-icon://full-screen" tooltip="{i18n>expand}" press="onDetailExpand" type="Transparent"/><Button icon="sap-icon://sys-cancel" tooltip="{i18n>close}" press="toggleDetailView" type="Transparent"/></Toolbar><VBox id="idBRSPanelContainer" width="100%" height="100%"/></items></VBox></layout:mainContent></layout:DynamicSideContent></Page></pages></App></mvc:View>',"brs_demo_tablemaster/i18n/i18n.properties":"title= Report\nappTitle = Report\nappDescription= Report\nshararableToAllUsers = Sharable to All Users\nadvancedFilters = ADVANCED FILTERS\nnoHdr = NO TITLE\nfrom = FROM\nto = TO\ndetailView = Detail View\nexportFile = Export to File\nclose = Close\nexpand = Expand/Collapse\njumpTo = Jump To Target\nwoStatus = STATUS\nwoDueDate = DUE DATE\napply = Apply\nclose = Close\ndocType = Document Type\ndescription = Description\ncreatedDate = Created Date\nnewWindow = Open in New window\ngrandTotal = Grand Total\nloadingIndicator = Loading Data...\nnoData = No Data\nmanageVariants = Manage Variants\ndelete = Delete\nselectAll = Select All\ndeselectAll = DeSelect All\nerr_gen = A general error occured. Please try later\nvarDelSuccess = Variants Deleted Successfully\nappError = Cannot load application. Mandatory Parameters Missing. Please check or try later\ndataErr = No data available for the current selection\nvarSaveErr = Please enter a valid variant Id before saving it\nsVarSaveErr = Sharable variants cannot be applied without saving first\nvarSaveSuccess = Variant saved successfully\nfltrErr1 = Filters are not correct for the current confuguration. Please update\nfltrErr2 = Mandatory Filters not set. please check your configuration\nconfigLoadErr=Could not load configuration data. Please try later\nfltrErr1 = Filters are not correct for the current confuguration. Please update\nfltrErr2 = Mandatory Filters not set. please check your configuration\n\n#ACTION_CLASS\ncaseActionGreErr = Cannot Display Requested Information. Please try Later;\nnewComment = New Comment\nnewQuestion = New Question\ninfoSaveSucc = Information saved successfully.\ncreate = Create\nci = Case and Interactions\nkmActDocErr = No Documents Found for the selected resource\nnavNotPossible = Navigation not possible\nenterComment = Enter Comments here\nenterQuestion = Enter Comments here\nassignTo = Assign To\nautoAssign = Auto Assign\ncaseSucc = Data created Successfully\ncomments = Comments\n \n#XLST: \nPPM_APP_3_120=Project Financial Details By Program & Project\n \n#XLST: \nPPM_APP_3_110=Project Financial Details By Project Phase \n \n#XLST: \nPPM_APP_120=Project Financial Transactions\n \n#XBUT: \nviewDocs=View Documents\n \n#XHED: \nlongText=Long Text\n \n#XTXT: \nexportExcel=Export Excel\n \n#YTXT: \nrating=Rating\n \n#XTXT: \nselectRiskRating=Select Risk Rating\ndoaErr = Could not load DOA information. Please try later.\n \n#XTOL: \nnumFieldPH=Enter a Number\n \n#YMSG: \ndataExportErr=Could not Export Information. Please try later\n \n#XBUT: \nsave=Save\n \n#XHED: \nvarSave=Save the current Variant\n \n#XFLD: \nvarID=Variant ID\n \n#XFLD: \nvarDesc=Variant Description\n \n#XBUT: \ncancel=Cancel\n \n#XHED: \nexportHdr=Export Options\n \n#XFLD: \nexportOpt1=Export without Comments\n \n#XFLD: \nexportopt2=Export With Comments\n \n#YMSG: \ncommentsexportmsg=Exporting Data with Comments might take longer than expected. Are you sure you want to continue?\n \n#XHED: \nwarning=Warning\nbeerr = Please select individual agency to perform the current action\napprove = Approve\ninprocess = In Progress\nreject = Reject\ndataSaveSucc = Information saved Successfully\ndataSaveErr = Could not save Data. Please try later.\nerror = Error\ninitalLoadMessage = Please Apply Filters on the Left to load data for this report\nmaxRecMessage = {0} records found. Loading all records may take an extended period to process. The first 1000 records have been loaded within the report. Please apply filters on the left or choose an option below to load more data\nmessage = Message\nloadall = Load All Data\ncancelapplyfilters = Cancel and Apply Filters\n \n#XTXT: \ninitialloadmessage = Please Apply at least one filter to load data","brs_demo_tablemaster/manifest.json":'{"_version":"1.1.0","sap.app":{"_version":"1.1.0","id":"brs_demo_tablemaster","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"1.0.0"},"title":"{{appTitle}}","description":"{{appDescription}}","sourceTemplate":{"id":"ui5template.basicSAPUI5ApplicationProject","version":"1.32.0"},"dataSources":{"HANA":{"uri":"/EZYCOMMERCE_SERVER"},"SAPGateway":{"uri":"/GW_HEC_HTTP_PRINCIPLE"}}},"sap.ui":{"_version":"1.1.0","technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true},"supportedThemes":["sap_hcb","sap_bluecrystal"]},"sap.ui5":{"_version":"1.1.0","rootView":{"viewName":"brs_demo_tablemaster.view.TableMaster","type":"XML"},"config":{"fullWidth":"true"},"dependencies":{"minUI5Version":"1.30.0","libs":{"sap.m":{},"sap.ui.core":{},"sap.ui.layout":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"brs_demo_tablemaster.i18n.i18n"}},"woStatusData":{"type":"sap.ui.model.json.JSONModel","uri":"model/woStatusData.json"},"woStatusCodeModel":{"type":"sap.ui.model.json.JSONModel","uri":"model/woStatus.json"},"assetDateData":{"type":"sap.ui.model.json.JSONModel","uri":"model/assetDateData.json"},"longText":{"type":"sap.ui.model.json.JSONModel","uri":"model/longText.json"}},"resources":{"css":[{"uri":"css/style.css"}]}},"sap.platform.hcp":{"uri":"","_version":"1.1.0"}}'}});